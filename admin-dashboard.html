<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="true">
    <meta name="theme-color" content="#0a0e27">
    <title>Command Center - GloHub Arena</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ==========================================
           ROOT VARIABLES & RESET
           ========================================== */
        :root {
            /* Cyberpunk Color Palette */
            --bg-dark: #1C1C1C;
            --bg-darker: #1C1C1C;
            --bg-card: #8435DE;
            --bg-card-hover: #1a2350;
            
            --primary: white;
            --primary-glow: rgba(0, 240, 255, 0.5);
            --secondary: #ff00ff;
            --secondary-glow: rgba(255, 0, 255, 0.5);
            --accent: #00ff88;
            --accent-glow: rgba(0, 255, 136, 0.5);
            
            --text: #e0e6ff;
            --text-dim: #8892b8;
            --text-bright: #ffffff;
            
            --success: #00ff88;
            --warning: #ffaa00;
            --error: #ff0055;
            
            --border: rgba(0, 240, 255, 0.2);
            --border-bright: rgba(0, 240, 255, 0.5);
            
            /* Category Colors */
            --baby-purple: #a855f7;
            --baby-pink: #ec4899;
            --baby-blue: #3b82f6;
            
            /* Fonts */
            --font-display: 'Inter', system-ui, -apple-system, sans-serif;
            --font-body: 'Inter', system-ui, -apple-system, sans-serif;
            
            /* Spacing */
            --nav-height: 70px;
            --mobile-nav-height: 70px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            background: var(--bg-dark);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(0, 240, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 0, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(0, 255, 136, 0.03) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        @keyframes gridPulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }

        /* ==========================================
           MAIN LAYOUT CONTAINER
           ========================================== */
        .game-container {
            display: grid;
            grid-template-columns: 1fr;
            min-height: 100vh;
            position: relative;
            z-index: 50;
        }

        .game-container::after {
            content: '';
            position: absolute;
            inset: 0;
            z-index: -1;
            pointer-events: none;
        }


        /* ==========================================
           DESKTOP SIDEBAR NAVIGATION
           ========================================== */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: #8435DE;
            padding: 30px 0;
            display: none;
            flex-direction: column;
            overflow-y: auto;
            z-index: 100;
        }

        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 2px;
            height: 100%;
            background: linear-gradient(90deg, #3C0E70  0%, #8435DE 100%);
            opacity: 0.5;
            filter: blur(4px);
        }

        .logo {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            font-size: 24px;
            font-weight: 900;
            text-align: center;
            margin-bottom: 40px;
            padding: 0 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
        }

        .logo::after {
            content: 'ARENA';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 10px;
            color: var(--text-dim);
            letter-spacing: 4px;
        }

        .nav-item {
            padding: 14px 20px;
            border: none;
            background: none;
            text-align: left;
            cursor: pointer;
            color: white;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-left: 3px solid transparent;
            position: relative;
            width: 100%;
            display: flex;
            align-items: center;
            gap: 15px;
            text-transform: uppercase;
            font-family: var(--font-display);
        }

        .nav-item .icon {
            font-size: 24px;
            transition: transform 0.3s ease;
        }

        .nav-item:hover {
            background: rgba(0, 240, 255, 0.1);
            color: var(--primary);
            border-left-color: var(--primary);
            padding-left: 35px;
            border-radius: 30px;
        }

        .nav-item:hover .icon {
            transform: scale(1.2) rotate(5deg);
        }

        .nav-item.active {
            background: rgba(0, 240, 255, 0.15);
            color: var(--primary);
            border-left-color: var(--primary);
            border-radius: 30px;
            box-shadow: 
                0 0 20px rgba(0, 240, 255, 0.2),
                inset 0 0 20px rgba(0, 240, 255, 0.1);
        }

        .nav-item.active .icon {
            animation: iconPulse 2s ease-in-out infinite;
        }

        @keyframes iconPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .nav-spacer {
            flex: 1;
        }

        .sidebar .btn-logout {
            margin: 20px 20px 0;
            width: 200px;
            background: linear-gradient(90deg, #3C0E70  0%, #8435DE 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 30px;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            margin-left: 25px;
            transition: all 0.3s ease;
            border: none;
            box-shadow:
        0 8px 20px rgba(0, 0, 0, 0.35),
        0 0 18px rgba(132, 53, 222, 0.45);
        }

        .sidebar .btn-logout:hover {
            background: white;
            color: #3C0E70;
            transform: translateY(-2px);
            font-weight: 700;
        }

        /* ==========================================
           MOBILE BOTTOM NAVIGATION
           ========================================== */
        .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: var(--mobile-nav-height);
            background: linear-gradient(90deg, #3C0E70  0%, #8435DE 100%);
            border-top: 2px solid var(--border);
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 100;
        }

        .mobile-nav::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #3C0E70  0%, #8435DE 100%);
            opacity: 0.5;
            filter: blur(2px);
        }

        .mobile-nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 4px;
            padding: 8px;
            cursor: pointer;
            color: var(--text-dim);
            transition: all 0.3s ease;
            position: relative;
            border: none;
            background: none;
            font-family: var(--font-display);
        }

        .mobile-nav-item .icon {
            font-size: 24px;
            transition: all 0.3s ease;
        }

        .mobile-nav-item .label {
            font-size: 11px;
            color: white;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .mobile-nav-item.active {
            color: var(--primary);
        }

        .mobile-nav-item.active .icon {
            animation: mobileBounce 0.5s ease;
            filter: drop-shadow(0 0 8px var(--primary-glow));
        }

        .mobile-nav-item.active::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 3px;
            background: var(--primary);
            border-radius: 0 0 3px 3px;
            box-shadow: 0 0 10px var(--primary-glow);
        }

        @keyframes mobileBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        /* ==========================================
           MAIN CONTENT AREA
           ========================================== */
       .dashboard-content {
            padding: 30px 20px;
            padding-bottom: calc(var(--mobile-nav-height) + 30px);
            overflow-y: auto;
            min-height: 100vh;
            position: relative; /* ADD THIS LINE */
            z-index: 10; /* ADD THIS LINE */
        }

        .tab-content {
            display: none;
            animation: slideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 50;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateY(20px) scale(0.98);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }

        /* ==========================================
           GAME CARD STYLES
           ========================================== */
        .game-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            z-index: 50;
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .game-card-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .game-card-header h2 {
            font-family: var(--font-display);
            font-size: 32px;
            color: white;
            margin-bottom: 10px;
            font-weight: 900;
            text-transform: uppercase;
            background: white;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .game-card-header p {
            font-size: 14px;
            color: white;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .game-card-content {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 25px;
            border: 1px solid rgba(0, 240, 255, 0.1);
        }

        /* ==========================================
           BUTTONS
           ========================================== */
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 700;
            font-family: var(--font-display);
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(90deg, #3C0E70  0%, #8435DE 100%);
            color: white;
            border-radius: 30px;
            border: none;
            box-shadow:
        0 8px 20px rgba(0, 0, 0, 0.35),
        0 0 18px rgba(132, 53, 222, 0.45);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            background: white;
            color: #3C0E70;
            font-weight: 700;
        }

        .btn-primary:active {
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: rgba(0, 240, 255, 0.1);
            color: var(--primary);
            padding: 14px 28px;
            border: 2px solid var(--primary);
            border-radius: 30px;
            font-size: 14px;
        }

        .btn-secondary:hover {
            background: rgba(0, 240, 255, 0.2);
            box-shadow: 0 0 20px rgba(0, 240, 255, 0.3);
            transform: translateY(-2px);
        }

        .btn-large {
            padding: 18px 36px;
            font-size: 18px;
        }

        .btn-start {
            background: linear-gradient(135deg, var(--success), #00cc70);
            color: var(--bg-dark);
            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
        }

        .btn-start:hover {
            box-shadow: 
                0 8px 25px rgba(0, 255, 136, 0.5),
                0 0 30px rgba(0, 255, 136, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--error), #cc0044);
            color: var(--text-bright);
            box-shadow: 0 4px 15px rgba(255, 0, 85, 0.3);
        }

        .btn-danger:hover {
            box-shadow: 
                0 8px 25px rgba(255, 0, 85, 0.5),
                0 0 30px rgba(255, 0, 85, 0.3);
        }

        /* ==========================================
           STATS GRID
           ========================================== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #3C0E70;
            border-radius: 30px;
            padding: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            transition: left 0.5s ease;
        }

        .stat-card:hover {
             transform: translateY(-5px);
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .stat-value {
            font-family: var(--font-display);
            font-size: 36px;
            font-weight: 900;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 14px;
            color: white;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* ==========================================
           GAME SELECTION CARDS
           ========================================== */
        .game-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .game-type-card {
            background: #3C0E70;
            border-radius: 30px;
            padding: 35px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .game-type-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 240, 255, 0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .game-type-card:hover::before {
            opacity: 1;
            animation: rotate 4s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .game-type-card:hover {
            border-color: var(--primary);
            transform: translateY(-10px) scale(1.02);
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.6),
                0 0 40px rgba(0, 240, 255, 0.3),
                inset 0 0 30px rgba(0, 240, 255, 0.05);
        }

        .game-type-icon {
            font-size: 64px;
            margin-bottom: 20px;
            display: block;
            filter: drop-shadow(0 0 15px rgba(0, 240, 255, 0.5));
        }

        .game-type-card h3 {
            font-family: var(--font-display);
            font-size: 24px;
            color: var(--text-bright);
            margin-bottom: 12px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .game-type-card p {
            color: white;
            font-size: 14px;
            line-height: 1.6;
        }

        /* ==========================================
           SESSIONS LIST
           ========================================== */
        .sessions-list {
            display: grid;
            gap: 20px;
        }

        .session-card {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 25px;
            display: grid;
            grid-template-columns: auto 1fr auto;
            gap: 20px;
            align-items: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .session-card::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: var(--accent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .session-card:hover {
            border-color: var(--border-bright);
            box-shadow: 0 5px 20px rgba(0, 240, 255, 0.2);
            transform: translateX(5px);
        }

        .session-card:hover::before {
            opacity: 1;
        }

        .session-status {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--success);
            box-shadow: 0 0 10px var(--accent-glow);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.2); }
        }

        .session-info h4 {
            font-family: var(--font-display);
            font-size: 18px;
            color: var(--text-bright);
            margin-bottom: 5px;
            font-weight: 700;
        }

        .session-meta {
            display: flex;
            gap: 15px;
            font-size: 13px;
            color: var(--text-dim);
        }

        .session-code {
            font-family: var(--font-display);
            font-size: 24px;
            font-weight: 900;
            color: var(--primary);
            padding: 10px 20px;
            background: rgba(0, 240, 255, 0.1);
            border: 2px solid var(--primary);
            border-radius: 8px;
            letter-spacing: 3px;
            text-shadow: 0 0 10px var(--primary-glow);
        }

        /* ==========================================
           EMPTY STATE
           ========================================== */
        .empty-state {
            text-align: center;
            padding: 60px 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            border: 2px dashed var(--border);
        }

        .empty-state .icon {
            font-size: 80px;
            margin-bottom: 20px;
            opacity: 0.5;
            filter: grayscale(100%);
        }

        .empty-state p {
            color: var(--text-dim);
            font-size: 16px;
        }

        /* ==========================================
           MODALS
           ========================================== */
       .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(5, 8, 22, 0.95);
            backdrop-filter: blur(10px);
            z-index: 9999;
            overflow-y: auto;
            padding: 20px;
            animation: fadeIn 0.3s ease;
            pointer-events: none; /* ADD THIS LINE */
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
            pointer-events: auto; /* ADD THIS LINE */
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--bg-card);
            border: 2px solid var(--border-bright);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.8),
                0 0 40px rgba(0, 240, 255, 0.2);
            animation: modalSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes modalSlideIn {
            from { 
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border: 2px solid white;
            background: transparent;
            color: var(--text-bright);
            font-size: 24px;
            cursor: pointer;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: var(--error);
            color: var(--text-bright);
            transform: rotate(90deg);
            box-shadow: 0 0 20px rgba(255, 0, 85, 0.5);
        }

        .modal h2 {
            font-family: var(--font-display);
            font-size: 28px;
            color: var(--text-bright);
            margin-bottom: 25px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* ==========================================
           FORMS
           ========================================== */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: var(--text);
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 14px 18px;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 16px;
            font-family: var(--font-body);
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(0, 0, 0, 0.6);
            box-shadow: 0 0 20px rgba(0, 240, 255, 0.2);
        }

        /* ==========================================
           GAME CODE DISPLAY
           ========================================== */
        .game-code-display {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, rgba(0, 240, 255, 0.1), rgba(255, 0, 255, 0.1));
            border-radius: 16px;
            border: 2px solid var(--border-bright);
            margin: 30px 0;
        }

        .game-code-display h3 {
            font-family: var(--font-display);
            font-size: 18px;
            color: var(--text-dim);
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .game-code {
            font-family: var(--font-display);
            font-size: 56px;
            font-weight: 900;
            color: var(--primary);
            letter-spacing: 8px;
            text-shadow: 
                0 0 20px var(--primary-glow),
                0 0 40px var(--primary-glow),
                0 0 60px var(--primary-glow);
            animation: codeGlow 2s ease-in-out infinite;
            margin: 20px 0;
        }

        @keyframes codeGlow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .code-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        /* ==========================================
           LEADERBOARD
           ========================================== */
        .leaderboard-list {
            display: grid;
            gap: 15px;
        }

        .leaderboard-item {
            display: grid;
            grid-template-columns: 60px 1fr auto;
            gap: 20px;
            align-items: center;
            padding: 20px;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .leaderboard-item:nth-child(1) {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), var(--bg-card));
            border-color: #ffd700;
        }

        .leaderboard-item:nth-child(2) {
            background: linear-gradient(135deg, rgba(192, 192, 192, 0.1), var(--bg-card));
            border-color: #c0c0c0;
        }

        .leaderboard-item:nth-child(3) {
            background: linear-gradient(135deg, rgba(205, 127, 50, 0.1), var(--bg-card));
            border-color: #cd7f32;
        }

        .leaderboard-item:hover {
            transform: translateX(10px);
            box-shadow: 0 5px 20px rgba(0, 240, 255, 0.2);
        }

        .rank {
            font-family: var(--font-display);
            font-size: 32px;
            font-weight: 900;
            color: var(--primary);
            text-align: center;
        }

        .leaderboard-item:nth-child(1) .rank {
            color: #ffd700;
            font-size: 40px;
        }

        .leaderboard-item:nth-child(2) .rank {
            color: #c0c0c0;
        }

        .leaderboard-item:nth-child(3) .rank {
            color: #cd7f32;
        }

        .player-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .player-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            border: 2px solid var(--border-bright);
        }

        .player-name {
            font-family: var(--font-display);
            font-size: 18px;
            font-weight: 700;
            color: var(--text-bright);
        }

        .score {
            font-family: var(--font-display);
            font-size: 24px;
            font-weight: 900;
            color: var(--accent);
            text-shadow: 0 0 10px var(--accent-glow);
        }

        /* ==========================================
           PROFILE PAGE
           ========================================== */
        .profile-header {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, var(--bg-card), var(--bg-darker));
            border-radius: 16px;
            border: 2px solid var(--border);
            margin-bottom: 30px;
        }

        .profile-avatar-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            margin: 0 auto 20px;
            border: 4px solid var(--border-bright);
            box-shadow: 0 0 30px rgba(0, 240, 255, 0.3);
        }

        .profile-name {
            font-family: var(--font-display);
            font-size: 32px;
            font-weight: 900;
            color: var(--text-bright);
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .profile-role {
            font-size: 16px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* ==========================================
           CATEGORY COLORS
           ========================================== */
        .color-theme-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .color-option {
            padding: 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 700;
            border: 2px solid transparent;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .color-baby-purple {
            background: rgba(168, 85, 247, 0.2);
            color: var(--baby-purple);
        }

        .color-baby-pink {
            background: rgba(236, 72, 153, 0.2);
            color: var(--baby-pink);
        }

        .color-baby-blue {
            background: rgba(59, 130, 246, 0.2);
            color: var(--baby-blue);
        }

        .color-option:hover,
        .color-option.selected {
            border-color: currentColor;
            box-shadow: 0 0 20px currentColor;
            transform: scale(1.05);
        }

        /* ==========================================
           FLASHCARDS
           ========================================== */
        .flashcards-container {
            display: grid;
            gap: 12px;
            max-height: 400px;
            overflow-y: auto;
        }

        .flashcard-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .flashcard-item:hover {
            background: rgba(0, 0, 0, 0.5);
            border-color: var(--primary);
            transform: translateX(5px);
        }

        .flashcard-text {
            color: var(--text);
            font-size: 16px;
        }

        .flashcard-delete {
            background: rgba(255, 0, 85, 0.2);
            border: 1px solid var(--error);
            color: var(--error);
            width: 32px;
            height: 32px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .flashcard-delete:hover {
            background: var(--error);
            color: var(--text-bright);
            transform: rotate(90deg);
        }

        /* ==========================================
           UTILITY CLASSES
           ========================================== */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        /* ==========================================
           RESPONSIVE - DESKTOP
           ========================================== */
        @media (min-width: 769px) {
            .sidebar {
                display: flex;
            }

            .mobile-nav {
                display: none;
            }

            .game-container {
                grid-template-columns: 1fr;
            }

            .dashboard-content {
                padding: 40px 50px;
                padding-bottom: 40px;
                margin-left: 280px;
                position: relative;
                z-index: 10;
            }

            .game-card {
                padding: 40px;
            }

            .stats-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* ==========================================
           RESPONSIVE - TABLET
           ========================================== */
        @media (max-width: 768px) {
            .game-card-header h2 {
                font-size: 24px;
            }

            .game-code {
                font-size: 36px;
                letter-spacing: 4px;
            }

            .code-actions {
                flex-direction: column;
            }

            .code-actions .btn {
                width: 100%;
            }

            .session-card {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 15px;
            }

            .session-code {
                font-size: 20px;
            }

            .game-selection {
                grid-template-columns: 1fr;
            }
        }

        /* ==========================================
           SCROLLBAR STYLING
           ========================================== */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-darker);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        /* ==========================================
           LOADING ANIMATION
           ========================================== */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--border);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- ==========================================
             DESKTOP SIDEBAR NAVIGATION
             ========================================== -->
        <aside class="sidebar">
            <div class="logo">Qitz!</div>
            
            <nav class="sidebar-nav">
                <button class="nav-item active" data-tab="overview">
                    <span class="icon">üè†</span>
                    <span>Overview</span>
                </button>
                
                <button class="nav-item" data-tab="sessions">
                    <span class="icon">üéÆ</span>
                    <span>Sessions</span>
                </button>
                
                <button class="nav-item" data-tab="leaderboard">
                    <span class="icon">üèÜ</span>
                    <span>Leaderboard</span>
                </button>
                
                <button class="nav-item" data-tab="profile">
                    <span class="icon">üë§</span>
                    <span>Profile</span>
                </button>
                
                <button class="nav-item hidden" data-tab="quiz-sessions">
                    <span class="icon">‚ùì</span>
                    <span>Quiz Manager</span>
                </button>
                
                <button class="nav-item hidden" data-tab="charades-sessions">
                    <span class="icon">üé≠</span>
                    <span>Charades</span>
                </button>
                
                <div class="nav-spacer"></div>
                
                <button class="btn-logout" onclick="logout()">
                  Logout
                </button>
            </nav>
        </aside>

        <!-- ==========================================
             MAIN CONTENT
             ========================================== -->
        <main class="dashboard-content">
            <!-- ==========================================
                 OVERVIEW TAB
                 ========================================== -->
            <div id="overview" class="tab-content active">
                <div class="game-card">
                    <div class="game-card-header">
                        <h2> Command Center</h2>
                        <p>Game Metrics</p>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                           <div class="stat-icon">
                            <img src="assets/gamepad.svg" alt="Game icon">
                        </div>

                            <div class="stat-value" id="totalGames">0</div>
                            <div class="stat-label">Active Games</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üë•</div>
                            <div class="stat-value" id="totalPlayers">0</div>
                            <div class="stat-label">Total Players</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚ö°</div>
                            <div class="stat-value" id="activeSessions">0</div>
                            <div class="stat-label">Live Sessions</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üèÜ</div>
                            <div class="stat-value" id="topScore">0</div>
                            <div class="stat-label">High Score</div>
                        </div>
                    </div>


                        <div style="margin-top: 25px; text-align: center;">
                            <button class="btn-primary btn-large" onclick="openGuideModal()">
                                üìñ Guide
                            </button>
                        </div>
                  
                </div>

                <!-- Game Selection -->
                <div class="game-card">
                    <div style="margin-top: 25px; text-align: center;">
                            <button class="btn-primary btn-large" onclick="openGuideModal()">
                                üìñ Guide
                            </button>
                        </div>
                    <div class="game-card-header">
                        <h2> Select Game Mode</h2>
                        <p>Choose your arena</p>
                    </div>

                    <div class="game-selection">
                        <div class="game-type-card" onclick="selectGame('quiz')">
                            <span class="game-type-icon">‚ùì</span>
                            <h3>Quiz Arena</h3>
                            <p>Test knowledge with multiple-choice questions. Perfect for trivia battles and educational challenges.</p>
                        </div>

                        <div class="game-type-card" onclick="selectGame('charades')">
                            <span class="game-type-icon">üé≠</span>
                            <h3>Charades Zone</h3>
                            <p>Act it out! Create custom categories with flashcards for endless party fun.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==========================================
                 SESSIONS TAB
                 ========================================== -->
            <div id="sessions" class="tab-content">
                <div class="game-card">
                    <div class="game-card-header">
                        <h2>üéÆ Active Sessions</h2>
                        <p>Live game monitoring</p>
                    </div>

                    <div class="game-card-content">
                        <div class="sessions-list">
                            <div class="empty-state">
                                <div class="icon">üéÆ</div>
                                <p>No active sessions</p>
                                <p style="margin-top: 10px;">Create a game from the Overview to get started!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==========================================
                 LEADERBOARD TAB
                 ========================================== -->
            <div id="leaderboard" class="tab-content">
                <div class="game-card">
                    <div class="game-card-header">
                        <h2>üèÜ Leaderboard</h2>
                        <p>Top Players</p>
                    </div>

                    <div class="game-card-content">
                        <div class="leaderboard-list">
                            <div class="leaderboard-item">
                                <div class="rank">1</div>
                                <div class="player-info">
                                    <div class="player-avatar">üéÆ</div>
                                    <div class="player-name">Player One</div>
                                </div>
                                <div class="score">1250</div>
                            </div>
                            <div class="leaderboard-item">
                                <div class="rank">2</div>
                                <div class="player-info">
                                    <div class="player-avatar">‚ö°</div>
                                    <div class="player-name">Speed Runner</div>
                                </div>
                                <div class="score">1100</div>
                            </div>
                            <div class="leaderboard-item">
                                <div class="rank">3</div>
                                <div class="player-info">
                                    <div class="player-avatar">üî•</div>
                                    <div class="player-name">Fire Starter</div>
                                </div>
                                <div class="score">980</div>
                            </div>
                            <div class="leaderboard-item">
                                <div class="rank">4</div>
                                <div class="player-info">
                                    <div class="player-avatar">üíé</div>
                                    <div class="player-name">Diamond Ace</div>
                                </div>
                                <div class="score">875</div>
                            </div>
                            <div class="leaderboard-item">
                                <div class="rank">5</div>
                                <div class="player-info">
                                    <div class="player-avatar">üåü</div>
                                    <div class="player-name">Star Player</div>
                                </div>
                                <div class="score">820</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==========================================
                 PROFILE TAB
                 ========================================== -->
            <div id="profile" class="tab-content">
                <div class="profile-header">
                    <div class="profile-avatar-large">üë®‚Äçüíº</div>
                    <div class="profile-name">Admin Player</div>
                    <div class="profile-role">Game Master</div>
                </div>

                <div class="game-card">
                    <div class="game-card-header">
                        <h2>‚öôÔ∏è Settings</h2>
                        <p>Customize your profile</p>
                    </div>

                    <div class="game-card-content">
                        <div class="form-group">
                            <label>Display Name</label>
                            <input type="text" placeholder="Enter your name" value="Admin Player">
                        </div>

                        <div class="form-group">
                            <label>Select Avatar</label>
                            <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; margin-top: 15px;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; font-size: 32px; cursor: pointer; border: 2px solid var(--border); transition: all 0.3s ease;" onclick="this.style.transform = 'scale(1.2)'">üë®‚Äçüíº</div>
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; font-size: 32px; cursor: pointer; border: 2px solid var(--border); transition: all 0.3s ease;" onclick="this.style.transform = 'scale(1.2)'">üéÆ</div>
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; font-size: 32px; cursor: pointer; border: 2px solid var(--border); transition: all 0.3s ease;" onclick="this.style.transform = 'scale(1.2)'">‚ö°</div>
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; font-size: 32px; cursor: pointer; border: 2px solid var(--border); transition: all 0.3s ease;" onclick="this.style.transform = 'scale(1.2)'">üî•</div>
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; font-size: 32px; cursor: pointer; border: 2px solid var(--border); transition: all 0.3s ease;" onclick="this.style.transform = 'scale(1.2)'">üíé</div>
                            </div>
                        </div>

                        <div style="margin-top: 30px;">
                            <button class="btn-primary btn-large">üíæ Save Changes</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==========================================
                 QUIZ SESSIONS TAB
                 ========================================== -->
            <div id="quiz-sessions" class="tab-content">
                <div class="game-card">
                    <div class="game-card-header">
                        <h2> Quiz Manager</h2>
                        <p>Create and manage quiz sessions</p>
                    </div>

                    <div style="margin-bottom: 25px; text-align: left;">
                        <button class="btn-secondary" onclick="backToOverview()">
                            ‚Üê Back to Overview
                        </button>
                    </div>

                    <div class="game-card-content">
                        <div class="form-group">
                            <label>Quiz Title</label>
                            <input type="text" id="quizTitle" placeholder="e.g., General Knowledge Quiz">
                        </div>

                        <div class="form-group">
                            <label>Number of Questions</label>
                            <input type="number" id="questionCount" placeholder="10" min="1" max="50">
                        </div>

                        <div class="form-group">
                            <label>Time per Question (seconds)</label>
                            <input type="number" id="timePerQuestion" placeholder="30" min="5" max="120">
                        </div>

                        <div class="form-group">
                            <label>Difficulty Level</label>
                            <select id="difficulty">
                                <option value="easy">Easy</option>
                                <option value="medium">Medium</option>
                                <option value="hard">Hard</option>
                            </select>
                        </div>

                        <div style="margin-top: 30px; text-align: center;">
                            <button class="btn-primary btn-large" onclick="createQuizSession()">
                                üöÄ Create Quiz Session
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==========================================
                 CHARADES SESSIONS TAB
                 ========================================== -->
            <div id="charades-sessions" class="tab-content">
                <div class="game-card">
                    <div class="game-card-header">
                        <h2> Charades Builder</h2>
                        <p>Create custom categories and flashcards</p>
                    </div>

                    <div style="margin-bottom: 25px; text-align: left;">
                        <button class="btn-secondary" onclick="backToOverview()">
                            ‚Üê Back to Overview
                        </button>
                    </div>

                    <div class="game-card-content">
                        <div class="form-group">
                            <label>Game Name</label>
                            <input type="text" id="charadesGameName" placeholder="e.g., Movie Night Charades">
                        </div>

                        <div class="form-group">
                            <label>Time per Round (seconds)</label>
                            <input type="number" id="roundTime" placeholder="60" min="30" max="180">
                        </div>

                        <div style="margin-top: 30px; margin-bottom: 25px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h3 style="font-family: var(--font-display); color: var(--text-bright); text-transform: uppercase;">Categories</h3>
                                <button class="btn-primary" onclick="openCategoryModal()">‚ûï Add Category</button>
                            </div>

                            <div style="display:flex; gap:20px; align-items:flex-start;">
                                <div style="flex:1">
                                    <div id="categoriesList" class="sessions-list">
                                        <p>No categories yet. Add your first category!</p>
                                    </div>
                                </div>
                                <div style="width:360px; background: rgba(0,0,0,0.12); padding:18px; border-radius:12px; margin-left:12px; border:1px solid var(--border);">
                                    <h4 style="margin:0 0 8px;">Saved Charades Games</h4>
                                    <div id="charadesGamesList">
                                        <p style="color:var(--text-dim);">Loading games...</p>
                                    </div>
                                    <button class="btn-secondary" style="margin-top:12px; width:100%;" onclick="refreshCharadesGames()">üîÑ Refresh</button>
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 30px; text-align: center;">
                            <button class="btn-primary btn-large" onclick="saveCharadesGame()">
                                üíæ Save Game & Generate Code
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- ==========================================
             MOBILE BOTTOM NAVIGATION
             ========================================== -->
        <nav class="mobile-nav">
            <button class="mobile-nav-item active" data-tab="overview">
                <span class="icon">üè†</span>
                <span class="label">Home</span>
            </button>
            <button class="mobile-nav-item" data-tab="sessions">
                <span class="icon">üéÆ</span>
                <span class="label">Sessions</span>
            </button>
            <button class="mobile-nav-item" data-tab="leaderboard">
                <span class="icon">üèÜ</span>
                <span class="label">Ranks</span>
            </button>
            <button class="mobile-nav-item" data-tab="profile">
                <span class="icon">üë§</span>
                <span class="label">Profile</span>
            </button>
        </nav>
    </div>

    <!-- ==========================================
         GUIDE MODAL
         ========================================== -->
    <div id="guideModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeGuideModal()">√ó</button>
            <h2>üìñ Game Master Guide</h2>
            
            <div style="color: var(--text); line-height: 1.8;">
                <h3 style="color: var(--primary); margin: 20px 0 10px; font-family: var(--font-display);">Getting Started</h3>
                <p>Welcome to the Command Center! Here's how to create and manage game sessions:</p>
                
                <h3 style="color: var(--primary); margin: 20px 0 10px; font-family: var(--font-display);">Quiz Mode</h3>
                <p><strong>1.</strong> Select "Quiz Arena" from the Overview<br>
                <strong>2.</strong> Set your quiz parameters (title, questions, time)<br>
                <strong>3.</strong> Generate a game code<br>
                <strong>4.</strong> Share the code with players</p>
                
                <h3 style="color: var(--primary); margin: 20px 0 10px; font-family: var(--font-display);">Charades Mode</h3>
                <p><strong>1.</strong> Select "Charades Zone" from Overview<br>
                <strong>2.</strong> Create custom categories<br>
                <strong>3.</strong> Add flashcards to each category<br>
                <strong>4.</strong> Save and share your game code</p>
                
                <h3 style="color: var(--primary); margin: 20px 0 10px; font-family: var(--font-display);">Managing Sessions</h3>
                <p>Monitor active games in the Sessions tab. View player connections, game codes, and session status in real-time.</p>
            </div>

            <div style="margin-top: 30px; text-align: center;">
                <button class="btn-primary" onclick="closeGuideModal()">Got It!</button>
            </div>
        </div>
    </div>

    <!-- ==========================================
         CATEGORY EDITOR MODAL
         ========================================== -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeCategoryModal()">√ó</button>
            <h2 id="categoryModalTitle">üé® Edit Category</h2>
            
            <div class="form-group">
                <label>Category Name</label>
                <input type="text" id="categoryName" placeholder="e.g., Movies, Animals">
            </div>

            <div class="form-group">
                <label>Choose Emoji</label>
                <input type="text" id="categoryEmoji" placeholder="Click to select emoji" readonly 
                       onclick="openEmojiPicker()" style="cursor: pointer;">
                <p style="font-size: 12px; color: var(--text-dim); margin-top: 8px;">
                    üí° Tip: Use your device's emoji keyboard or paste an emoji
                </p>
            </div>

            <div class="form-group">
                <label>Category Color</label>
                <div class="color-theme-selector">
                    <div class="color-option color-baby-purple" onclick="selectCategoryColor('baby-purple')">
                        Purple
                    </div>
                    <div class="color-option color-baby-pink selected" onclick="selectCategoryColor('baby-pink')">
                        Pink
                    </div>
                    <div class="color-option color-baby-blue" onclick="selectCategoryColor('baby-blue')">
                        Blue
                    </div>
                </div>
            </div>

            <div style="margin-top: 30px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3 style="font-family: var(--font-display); color: var(--text-bright);">
                        Flashcards (<span id="flashcardCount">0</span>/20)
                    </h3>
                    <button class="btn-primary" onclick="showAddFlashcard()">‚ûï Add</button>
                </div>

                <div id="addFlashcardForm" class="hidden" style="background: rgba(0, 0, 0, 0.3); padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 1px solid var(--border);">
                    <div class="form-group" style="margin-bottom: 15px;">
                        <input type="text" id="flashcardText" placeholder="Enter word or phrase">
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn-primary" onclick="saveFlashcard()">üíæ Save</button>
                        <button class="btn-secondary" onclick="cancelAddFlashcard()">‚úñ Cancel</button>
                    </div>
                </div>

                <div id="flashcardsList" class="flashcards-container">
                    <div class="empty-state" style="padding: 40px;">
                        <div class="icon">üé¥</div>
                        <p>No flashcards yet. Add your first one!</p>
                    </div>
                </div>
            </div>

            <div style="margin-top: 30px; display: flex; gap: 12px; justify-content: flex-end;">
                <button class="btn-secondary" onclick="closeCategoryModal()">Cancel</button>
                <button class="btn-primary" onclick="saveCategoryChanges()">üíæ Save Category</button>
            </div>
        </div>
    </div>

    <!-- ==========================================
         GAME CODE MODAL
         ========================================== -->
    <div id="gameCodeModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeGameCodeModal()">√ó</button>
            <h2>üéâ Game Ready!</h2>
            
            <div class="game-code-display">
                <h3>Your Game Code</h3>
                <div class="game-code" id="displayGameCode">ABC123</div>
                <div class="code-actions">
                    <button class="btn-primary" onclick="copyGameCode()">üìã Copy</button>
                    <button class="btn-primary" onclick="shareGameCode()">üì§ Share</button>
                    <button class="btn-start" onclick="joinOwnGame()">üéÆ Join Game</button>
                </div>
            </div>

            <div style="margin-top: 25px; padding: 25px; background: rgba(0, 0, 0, 0.3); border-radius: 12px; border: 1px solid var(--border);">
                <h4 style="margin-bottom: 12px; color: var(--text-bright); font-family: var(--font-display);">
                    üì± Share with Players
                </h4>
                <p style="color: var(--text-dim); font-size: 14px; line-height: 1.6;">
                    Players can join by entering this code at the join page. The code automatically routes them to the correct game type.
                </p>
            </div>

            <div style="margin-top: 25px; text-align: center;">
                <button class="btn-secondary" onclick="closeGameCodeModal()">Done</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase.js"></script>
    <script src="admin.js"></script>
    <script>
        // ==========================================
        // NAVIGATION & TAB MANAGEMENT
        // ==========================================
        
        // Tab Switching Function
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            const targetTab = document.getElementById(tabName);
            if (targetTab) {
                targetTab.classList.add('active');
            }
            
            // Update desktop nav items
            document.querySelectorAll('.sidebar .nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.tab === tabName) {
                    item.classList.add('active');
                }
            });
            
            // Update mobile nav items
            document.querySelectorAll('.mobile-nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.tab === tabName) {
                    item.classList.add('active');
                }
            });
            
            // Load tab-specific data
            loadTabData(tabName);
        }

        // Setup navigation listeners
        document.addEventListener('DOMContentLoaded', () => {
            // Desktop sidebar navigation
            document.querySelectorAll('.sidebar .nav-item').forEach(item => {
                item.addEventListener('click', () => {
                    const tab = item.dataset.tab;
                    if (tab && !item.classList.contains('hidden')) {
                        switchTab(tab);
                    }
                });
            });

            // Mobile bottom navigation
            document.querySelectorAll('.mobile-nav-item').forEach(item => {
                item.addEventListener('click', () => {
                    const tab = item.dataset.tab;
                    if (tab) {
                        switchTab(tab);
                    }
                });
            });

            // Initialize stats
            updateDashboardStats();
        });

        // ==========================================
        // MODAL FUNCTIONS
        // ==========================================
        
        function openGuideModal() {
            document.getElementById('guideModal').classList.add('active');
        }

        function closeGuideModal() {
            document.getElementById('guideModal').classList.remove('active');
        }

        function openCategoryModal() {
            document.getElementById('categoryModal').classList.add('active');
        }

        function closeCategoryModal() {
            document.getElementById('categoryModal').classList.remove('active');
        }

        function closeGameCodeModal() {
            document.getElementById('gameCodeModal').classList.remove('active');
        }

        // Close modals when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('active');
            }
        });

        // ==========================================
        // GAME SELECTION
        // ==========================================
        
        function selectGame(gameType) {
            if (gameType === 'quiz') {
                switchTab('quiz-sessions');
                document.querySelector('[data-tab="quiz-sessions"]').classList.remove('hidden');
                document.querySelector('[data-tab="charades-sessions"]').classList.add('hidden');
            } else if (gameType === 'charades') {
                switchTab('charades-sessions');
                document.querySelector('[data-tab="charades-sessions"]').classList.remove('hidden');
                document.querySelector('[data-tab="quiz-sessions"]').classList.add('hidden');
            }
        }

        function backToOverview() {
            switchTab('overview');
            document.querySelector('[data-tab="quiz-sessions"]').classList.add('hidden');
            document.querySelector('[data-tab="charades-sessions"]').classList.add('hidden');
        }

        // ==========================================
        // QUIZ FUNCTIONS
        // ==========================================
        
        function createQuizSession() {
            const title = document.getElementById('quizTitle').value;
            const questionCount = document.getElementById('questionCount').value;
            const timePerQuestion = document.getElementById('timePerQuestion').value;
            const difficulty = document.getElementById('difficulty').value;

            if (!title || !questionCount || !timePerQuestion) {
                alert('Please fill in all fields');
                return;
            }

            // Generate random game code
            const gameCode = generateGameCode();
            
            // Show game code modal
            document.getElementById('displayGameCode').textContent = gameCode;
            document.getElementById('gameCodeModal').classList.add('active');

            // In production, this would save to database
            console.log('Quiz Session Created:', { title, questionCount, timePerQuestion, difficulty, gameCode });
        }

        // ==========================================
        // CHARADES FUNCTIONS
        // ==========================================
        
        let currentCategories = [];
        let currentFlashcards = [];
        let editingCategoryIndex = -1;

        let currentGameId = null;
        async function saveCharadesGame() {
            const gameName = document.getElementById('charadesGameName').value.trim();
            const roundTime = document.getElementById('roundTime').value;

            if (!gameName || !roundTime) {
                alert('Please fill in all fields');
                return;
            }

            if (currentCategories.length === 0) {
                alert('Please add at least one category');
                return;
            }

            try {
                // Insert game
                const gameCode = generateGameCode();
                const { data: gameData, error: gameErr } = await window.supabaseClient
                    .from('charades_games')
                    .insert([{ name: gameName, round_time: roundTime, code: gameCode }])
                    .select('*')
                    .single();

                if (gameErr) throw gameErr;
                currentGameId = gameData.id;

                // Link default categories to this game
                const { data: defaultCats, error: defErr } = await window.supabaseClient
                    .from('charades_categories')
                    .select('*')
                    .eq('is_default', true);
                if (defErr) throw defErr;

                if (defaultCats.length) {
                    const links = defaultCats.map(c => ({ game_id: currentGameId, category_id: c.id }));
                    const { error: linkErr } = await window.supabaseClient.from('charades_game_categories').insert(links);
                    if (linkErr) {
                        // Some DBs will error if limit exceeded or other constraint; if so, continue but notify
                        throw linkErr;
                    }
                }

                // Insert custom categories and link them
                for (const cat of currentCategories.filter(c => !c.is_default)) {
                    const { data: newCat, error: catErr } = await window.supabaseClient
                        .from('charades_categories')
                        .insert([{ name: cat.name, emoji: cat.emoji, color: cat.color || null, is_default: false, is_locked: false }])
                        .select('*')
                        .single();
                    if (catErr) throw catErr;

                    // link
                    const { error: linkErr2 } = await window.supabaseClient
                        .from('charades_game_categories')
                        .insert([{ game_id: currentGameId, category_id: newCat.id }]);
                    if (linkErr2) throw linkErr2;

                    // Insert flashcards
                    for (const fc of (cat.flashcards || [])) {
                        const { error: fcErr } = await window.supabaseClient
                            .from('charades_flashcards')
                            .insert([{ category_id: newCat.id, text: fc }]);
                        if (fcErr) throw fcErr;
                    }
                }

                document.getElementById('displayGameCode').textContent = gameCode;
                document.getElementById('gameCodeModal').classList.add('active');
                alert('Game saved successfully!');
                await loadCharadesGames();
            } catch (err) {
                handleSupabaseError(err);
            }
        }

        function selectCategoryColor(color) {
            document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('selected'));
            event.target.classList.add('selected');
        }

        function showAddFlashcard() {
            if (currentFlashcards.length >= 20) {
                alert('A category may have a maximum of 20 flashcards.');
                return;
            }
            document.getElementById('addFlashcardForm').classList.remove('hidden');
            document.getElementById('flashcardText').focus();
        }

        function cancelAddFlashcard() {
            document.getElementById('addFlashcardForm').classList.add('hidden');
            document.getElementById('flashcardText').value = '';
        }

        function saveFlashcard() {
            const text = document.getElementById('flashcardText').value.trim();
            if (!text) return;
            if (currentFlashcards.length >= 20) {
                alert('Cannot add more than 20 flashcards for a category.');
                return;
            }

            currentFlashcards.push(text);
            updateFlashcardsList();
            cancelAddFlashcard();
        }

        function updateFlashcardsList() {
            const container = document.getElementById('flashcardsList');
            document.getElementById('flashcardCount').textContent = currentFlashcards.length;

            if (currentFlashcards.length === 0) {
                container.innerHTML = `
                    <div class="empty-state" style="padding: 40px;">
                        <div class="icon">üé¥</div>
                        <p>No flashcards yet. Add your first one!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = currentFlashcards.map((card, index) => `
                <div class="flashcard-item">
                    <span class="flashcard-text">${card}</span>
                    <button class="flashcard-delete" onclick="deleteFlashcard(${index})">√ó</button>
                </div>
            `).join('');
        }

        function deleteFlashcard(index) {
            currentFlashcards.splice(index, 1);
            updateFlashcardsList();
        }

        async function saveCategoryChanges() {
            const name = document.getElementById('categoryName').value.trim();
            const emoji = document.getElementById('categoryEmoji').value.trim();
            const selectedColor = document.querySelector('.color-option.selected');
            
            if (!name || !emoji) {
                alert('Please fill in category name and emoji');
                return;
            }

            if (currentFlashcards.length === 0) {
                alert('Please add at least one flashcard');
                return;
            }

            // If we are editing an existing category that is locked, block
            if (editingCategoryIndex >= 0 && currentCategories[editingCategoryIndex].is_locked) {
                alert('This category is locked and cannot be edited.');
                return;
            }

            const categoryPayload = {
                name,
                emoji,
                color: selectedColor ? selectedColor.textContent.trim() : null
            };

            try {
                // If editing an existing category with an id -> update DB
                if (editingCategoryIndex >= 0 && currentCategories[editingCategoryIndex].id) {
                    const existing = currentCategories[editingCategoryIndex];
                    const { error: updErr } = await window.supabaseClient
                        .from('charades_categories')
                        .update(categoryPayload)
                        .eq('id', existing.id);
                    if (updErr) throw updErr;

                    // replace flashcards for category
                    const { error: delErr } = await window.supabaseClient
                        .from('charades_flashcards')
                        .delete()
                        .eq('category_id', existing.id);
                    if (delErr) throw delErr;

                    for (const fc of currentFlashcards) {
                        const { error: fcErr } = await window.supabaseClient
                            .from('charades_flashcards')
                            .insert([{ category_id: existing.id, text: fc }]);
                        if (fcErr) throw fcErr;
                    }

                    // refresh that category's flashcards count locally
                    existing.name = name; existing.emoji = emoji; existing.color = categoryPayload.color;
                    existing.flashcards = [...currentFlashcards];
                    currentCategories[editingCategoryIndex] = existing;
                } else if (currentGameId) {
                    // New category for an existing saved game: insert category, link it, insert flashcards
                    const { data: newCat, error: catErr } = await window.supabaseClient
                        .from('charades_categories')
                        .insert([{ name: name, emoji: emoji, color: categoryPayload.color, is_default: false, is_locked: false }])
                        .select('*')
                        .single();
                    if (catErr) throw catErr;

                    const { error: linkErr } = await window.supabaseClient
                        .from('charades_game_categories')
                        .insert([{ game_id: currentGameId, category_id: newCat.id }]);
                    if (linkErr) throw linkErr;

                    for (const fc of currentFlashcards) {
                        const { error: fcErr } = await window.supabaseClient
                            .from('charades_flashcards')
                            .insert([{ category_id: newCat.id, text: fc }]);
                        if (fcErr) throw fcErr;
                    }

                    newCat.flashcards = [...currentFlashcards];
                    currentCategories.push(newCat);
                } else {
                    // New unsaved game -> create locally
                    const newCatLocal = { ...categoryPayload, flashcards: [...currentFlashcards], is_default: false, is_locked: false };
                    currentCategories.push(newCatLocal);
                }

                updateCategoriesList();
                closeCategoryModal();
                resetCategoryForm();
                await loadCharadesGames();
            } catch (err) {
                handleSupabaseError(err);
            }
        }

        function updateCategoriesList() {
            const container = document.getElementById('categoriesList');
            
            if (currentCategories.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="icon">üé¥</div>
                        <p>No categories yet. Add your first category!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = currentCategories.map((cat, index) => {
                const locked = !!cat.is_locked;
                const lockBadge = locked ? '<span style="color:var(--text-dim); margin-right:8px;">üîí</span>' : '';
                const editBtn = `<button class="btn-secondary" ${locked ? 'disabled title="Locked"' : `onclick="editCategory(${index})` } style="padding: 8px 16px; font-size: 14px;">‚úèÔ∏è Edit</button>`;
                const delBtn = `<button class="btn-danger" ${locked ? 'disabled title="Locked"' : `onclick="deleteCategory(${index})` } style="padding: 8px 16px; font-size: 14px;">üóëÔ∏è</button>`;

                return `
                <div class="session-card">
                    <div class="session-status"></div>
                    <div class="session-info">
                        <h4>${lockBadge}${cat.emoji || ''} ${cat.name}</h4>
                        <div class="session-meta">
                            <span>${(cat.flashcards||[]).length} flashcards</span>
                            <span>Color: ${cat.color || '‚Äî'}</span>
                            ${cat.is_default ? '<span style="margin-left:8px; color:var(--text-dim)">Default</span>' : ''}
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        ${editBtn}
                        ${delBtn}
                    </div>
                </div>`;
            }).join('');
        }

        async function editCategory(index) {
            editingCategoryIndex = index;
            const category = currentCategories[index];

            if (category.is_locked) {
                alert('This is a locked default category and cannot be edited.');
                return;
            }

            document.getElementById('categoryName').value = category.name || '';
            document.getElementById('categoryEmoji').value = category.emoji || '';

            // If this category comes from DB and we haven't loaded flashcards, fetch them
            if (category.id) {
                const { data: fcs, error } = await window.supabaseClient
                    .from('charades_flashcards')
                    .select('*')
                    .eq('category_id', category.id);
                if (error) {
                    handleSupabaseError(error);
                    currentFlashcards = [];
                } else {
                    currentFlashcards = (fcs || []).map(f => f.text);
                }
            } else {
                currentFlashcards = [...(category.flashcards || [])];
            }

            updateFlashcardsList();
            openCategoryModal();
        }

        async function deleteCategory(index) {
            const cat = currentCategories[index];
            if (!confirm('Delete this category?')) return;

            if (cat.is_locked) {
                alert('This category is locked and cannot be deleted.');
                return;
            }

            try {
                // If it exists in DB, remove link and category
                if (cat.id) {
                    const { error: unlinkErr } = await window.supabaseClient
                        .from('charades_game_categories')
                        .delete()
                        .eq('category_id', cat.id);
                    if (unlinkErr) throw unlinkErr;

                    const { error: delErr } = await window.supabaseClient
                        .from('charades_categories')
                        .delete()
                        .eq('id', cat.id);
                    if (delErr) throw delErr;
                }

                // Remove locally
                currentCategories.splice(index, 1);
                updateCategoriesList();
                await loadCharadesGames();
            } catch (err) {
                handleSupabaseError(err);
            }
        }

        function resetCategoryForm() {
            editingCategoryIndex = -1;
            document.getElementById('categoryName').value = '';
            document.getElementById('categoryEmoji').value = '';
            currentFlashcards = [];
            updateFlashcardsList();
        }

        function openEmojiPicker() {
            // Allow native emoji keyboard
            const input = document.getElementById('categoryEmoji');
            input.removeAttribute('readonly');
            input.focus();
            setTimeout(() => {
                input.setAttribute('readonly', true);
            }, 100);
        }

        // ==========================================
        // UTILITY FUNCTIONS
        // ==========================================
        
        function generateGameCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let code = '';
            for (let i = 0; i < 6; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        function copyGameCode() {
            const code = document.getElementById('displayGameCode').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('Code copied to clipboard!');
            });
        }

        function shareGameCode() {
            const code = document.getElementById('displayGameCode').textContent;
            if (navigator.share) {
                navigator.share({
                    title: 'Join my game!',
                    text: `Join my game with code: ${code}`,
                }).catch(() => {
                    copyGameCode();
                });
            } else {
                copyGameCode();
            }
        }

        function joinOwnGame() {
            const code = document.getElementById('displayGameCode').textContent;
            alert(`Joining game with code: ${code}`);
            // In production, this would navigate to the game page
        }

        function updateDashboardStats() {
            // In production, these would fetch from database
            document.getElementById('totalGames').textContent = '12';
            document.getElementById('totalPlayers').textContent = '48';
            document.getElementById('activeSessions').textContent = '3';
            document.getElementById('topScore').textContent = '1250';
        }

        async function loadCharadesGames() {
            const container = document.getElementById('charadesGamesList');
            container.innerHTML = '<p style="color:var(--text-dim);">Loading games...</p>';
            try {
                const { data, error } = await window.supabaseClient
                    .from('charades_games')
                    .select('*')
                    .order('created_at', { ascending: false });
                if (error) throw error;

                if (!data || data.length === 0) {
                    container.innerHTML = '<p style="color:var(--text-dim);">No saved games yet</p>';
                    return;
                }

                container.innerHTML = data.map(g => `
                    <div style="display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:8px;">
                        <div>
                            <strong>${g.name}</strong>
                            <div style="font-size:12px; color:var(--text-dim)">Code: ${g.code}</div>
                        </div>
                        <div style="display:flex; gap:6px;">
                            <button class="btn-secondary" onclick="openCharadesGame('${g.id}')">Open</button>
                        </div>
                    </div>
                `).join('');
            } catch (err) {
                handleSupabaseError(err);
            }
        }

        function refreshCharadesGames() {
            loadCharadesGames();
        }

        async function openCharadesGame(gameId) {
            try {
                const { data: game, error: gErr } = await window.supabaseClient
                    .from('charades_games')
                    .select('*')
                    .eq('id', gameId)
                    .single();
                if (gErr) throw gErr;
                currentGameId = game.id;
                document.getElementById('charadesGameName').value = game.name || '';
                document.getElementById('roundTime').value = game.round_time || '';

                // Load linked categories via join
                const { data: links, error: lErr } = await window.supabaseClient
                    .from('charades_game_categories')
                    .select('*,charades_categories(*)')
                    .eq('game_id', gameId);
                if (lErr) throw lErr;

                // Build currentCategories with category info and flashcards
                currentCategories = [];
                for (const link of links) {
                    const c = link.charades_categories;
                    const categoryObj = { id: c.id, name: c.name, emoji: c.emoji, color: c.color, is_default: c.is_default, is_locked: c.is_locked, flashcards: [] };
                    // fetch flashcards for category
                    const { data: fcs, error: fErr } = await window.supabaseClient
                        .from('charades_flashcards')
                        .select('*')
                        .eq('category_id', c.id)
                        .order('id');
                    if (fErr) {
                        handleSupabaseError(fErr);
                    } else {
                        categoryObj.flashcards = (fcs || []).map(f => f.text);
                    }
                    currentCategories.push(categoryObj);
                }

                updateCategoriesList();
                switchTab('charades-sessions');
            } catch (err) {
                handleSupabaseError(err);
            }
        }

        function handleSupabaseError(err) {
            console.error('Supabase error', err);
            // Map some common Postgres error codes/messages to user-friendly messages
            if (err && err.code === '23514') {
                alert('A database constraint blocked the action (limit exceeded or invalid data).');
            } else if (err && err.details && /locked/.test(err.details)) {
                alert('This operation is not permitted on a locked category.');
            } else {
                alert('An error occurred. See console for details.');
            }
        }

        // Initialize on load
        window.addEventListener('load', () => {
            if (window.supabaseClient) {
                loadCharadesGames();
            }
        });

        function loadTabData(tabName) {
            // In production, this would fetch relevant data for each tab
            console.log('Loading data for tab:', tabName);
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                // In production, this would handle actual logout
                alert('Logged out successfully!');
            }
        }
    </script>
</body>
</html>