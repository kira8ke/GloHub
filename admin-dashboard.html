<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="true">
    <meta name="theme-color" content="#0a0e27">
    <title>Command Center - GloHub Arena</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ==========================================
           ROOT VARIABLES & RESET
           ========================================== */
        :root {
            /* Cyberpunk Color Palette */
            --bg-dark: #1C1C1C;
            --bg-darker: #1C1C1C;
            --bg-card: #8435DE;
            --bg-card-hover: #1a2350;
            
            --primary: white;
            --primary-glow: rgba(0, 240, 255, 0.5);
            --secondary: #ff00ff;
            --secondary-glow: rgba(255, 0, 255, 0.5);
            --accent: #00ff88;
            --accent-glow: rgba(0, 255, 136, 0.5);
            
            --text: #e0e6ff;
            --text-dim: #8892b8;
            --text-bright: #ffffff;
            
            --success: #00ff88;
            --warning: #ffaa00;
            --error: #ff0055;
            
            --border: rgba(0, 240, 255, 0.2);
            --border-bright: rgba(0, 240, 255, 0.5);
            
            /* Category Colors */
            --baby-purple: #a855f7;
            --baby-pink: #ec4899;
            --baby-blue: #3b82f6;
            
            /* Fonts */
            --font-display: 'Inter', system-ui, -apple-system, sans-serif;
            --font-body: 'Inter', system-ui, -apple-system, sans-serif;
            
            /* Spacing */
            --nav-height: 70px;
            --mobile-nav-height: 70px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            background: var(--bg-dark);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(0, 240, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 0, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(0, 255, 136, 0.03) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        @keyframes gridPulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }

        /* ==========================================
           MAIN LAYOUT CONTAINER
           ========================================== */
        .game-container {
            display: grid;
            grid-template-columns: 1fr;
            min-height: 100vh;
            position: relative;
            z-index: 50;
        }

        .game-container::after {
            content: '';
            position: absolute;
            inset: 0;
            z-index: -1;
            pointer-events: none;
        }


        /* ==========================================
           DESKTOP SIDEBAR NAVIGATION
           ========================================== */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: #8435DE;
            padding: 30px 0;
            display: none;
            flex-direction: column;
            overflow-y: auto;
            z-index: 100;
        }

        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 2px;
            height: 100%;
            background: linear-gradient(90deg, #3C0E70  0%, #8435DE 100%);
            opacity: 0.5;
            filter: blur(4px);
        }

        .logo {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            font-size: 24px;
            font-weight: 900;
            text-align: center;
            margin-bottom: 40px;
            padding: 0 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
        }

        .logo::after {
            content: 'ARENA';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 10px;
            color: var(--text-dim);
            letter-spacing: 4px;
        }

        .nav-item {
            padding: 14px 20px;
            border: none;
            background: none;
            text-align: left;
            cursor: pointer;
            color: white;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-left: 3px solid transparent;
            position: relative;
            width: 100%;
            display: flex;
            align-items: center;
            gap: 15px;
            text-transform: uppercase;
            font-family: var(--font-display);
        }

        .nav-item .icon {
            font-size: 24px;
            transition: transform 0.3s ease;
        }

        .nav-item:hover {
            background: rgba(0, 240, 255, 0.1);
            color: var(--primary);
            border-left-color: var(--primary);
            padding-left: 35px;
            border-radius: 30px;
        }

        .nav-item:hover .icon {
            transform: scale(1.2) rotate(5deg);
        }

        .nav-item.active {
            background: rgba(0, 240, 255, 0.15);
            color: var(--primary);
            border-left-color: var(--primary);
            border-radius: 30px;
            box-shadow: 
                0 0 20px rgba(0, 240, 255, 0.2),
                inset 0 0 20px rgba(0, 240, 255, 0.1);
        }

        .nav-item.active .icon {
            animation: iconPulse 2s ease-in-out infinite;
        }

        @keyframes iconPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .nav-spacer {
            flex: 1;
        }

        .sidebar .btn-logout {
            margin: 20px 20px 0;
            width: 200px;
            background: linear-gradient(90deg, #3C0E70  0%, #8435DE 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 30px;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            margin-left: 25px;
            transition: all 0.3s ease;
            border: none;
            box-shadow:
        0 8px 20px rgba(0, 0, 0, 0.35),
        0 0 18px rgba(132, 53, 222, 0.45);
        }

        .sidebar .btn-logout:hover {
            background: white;
            color: #3C0E70;
            transform: translateY(-2px);
            font-weight: 700;
        }

        /* ==========================================
           MOBILE BOTTOM NAVIGATION
           ========================================== */
        .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: var(--mobile-nav-height);
            background: #8435DE;
            border-top: 2px solid var(--border);
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 100;
        }

        .mobile-nav::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: #8435DE;
            opacity: 0.5;
            filter: blur(2px);
        }

        .mobile-nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 4px;
            padding: 8px;
            cursor: pointer;
            color: var(--text-dim);
            transition: all 0.3s ease;
            position: relative;
            border: none;
            background: none;
            font-family: var(--font-display);
        }

        .mobile-nav-item .icon {
            font-size: 24px;
            transition: all 0.3s ease;
        }

        .mobile-nav-item .label {
            font-size: 11px;
            color: white;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .mobile-nav-item.active {
            color: var(--primary);
        }

        .mobile-nav-item.active .icon {
            animation: mobileBounce 0.5s ease;
            filter: drop-shadow(0 0 8px var(--primary-glow));
        }

        .mobile-nav-item.active::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 3px;
            background: var(--primary);
            border-radius: 0 0 3px 3px;
            box-shadow: 0 0 10px var(--primary-glow);
        }

        @keyframes mobileBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        /* ==========================================
           MAIN CONTENT AREA
           ========================================== */
       .dashboard-content {
            padding: 30px 20px;
            padding-bottom: calc(var(--mobile-nav-height) + 30px);
            overflow-y: auto;
            min-height: 100vh;
            position: relative;
            z-index: 10;
        }

        .tab-content {
            display: none;
            animation: slideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 50;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateY(20px) scale(0.98);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }

        /* ==========================================
           GAME CARD STYLES
           ========================================== */
        .game-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            z-index: 50;
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .game-card-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .game-card-header h2 {
            font-family: var(--font-display);
            font-size: 32px;
            color: white;
            margin-bottom: 10px;
            font-weight: 900;
            text-transform: uppercase;
            background: white;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .game-card-header p {
            font-size: 14px;
            color: white;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .game-card-content {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 25px;
            border: 1px solid rgba(0, 240, 255, 0.1);
        }

        /* ==========================================
           BUTTONS
           ========================================== */
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 700;
            font-family: var(--font-display);
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(90deg, #3C0E70  0%, #8435DE 100%);
            color: white;
            border-radius: 30px;
            border: none;
            box-shadow:
        0 8px 20px rgba(0, 0, 0, 0.35),
        0 0 18px rgba(132, 53, 222, 0.45);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            background: white;
            color: #3C0E70;
            font-weight: 700;
        }

        .btn-primary:active {
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: rgba(0, 240, 255, 0.1);
            color: var(--primary);
            padding: 14px 28px;
            border: 2px solid var(--primary);
            border-radius: 30px;
            font-size: 14px;
        }

        .btn-secondary:hover {
            background: rgba(0, 240, 255, 0.2);
            box-shadow: 0 0 20px rgba(0, 240, 255, 0.3);
            transform: translateY(-2px);
        }

        .btn-large {
            padding: 18px 36px;
            font-size: 18px;
        }

        .btn-start {
            background: linear-gradient(135deg, var(--success), #00cc70);
            color: var(--bg-dark);
            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
        }

        .btn-start:hover {
            box-shadow: 
                0 8px 25px rgba(0, 255, 136, 0.5),
                0 0 30px rgba(0, 255, 136, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--error), #cc0044);
            color: var(--text-bright);
            box-shadow: 0 4px 15px rgba(255, 0, 85, 0.3);
        }

        .btn-danger:hover {
            box-shadow: 
                0 8px 25px rgba(255, 0, 85, 0.5),
                0 0 30px rgba(255, 0, 85, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }

        /* ==========================================
           STATS GRID
           ========================================== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #3C0E70;
            border-radius: 30px;
            padding: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            transition: left 0.5s ease;
        }

        .stat-card:hover {
             transform: translateY(-5px);
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .stat-value {
            font-family: var(--font-display);
            font-size: 36px;
            font-weight: 900;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 14px;
            color: white;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* ==========================================
           GAME SELECTION CARDS
           ========================================== */
        .game-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .game-type-card {
            background: #3C0E70;
            border-radius: 30px;
            padding: 35px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;      /* horizontal centering */
            justify-content: center;  /* vertical centering */
            text-align: center;
        }

        .game-type-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 240, 255, 0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .game-type-card:hover::before {
            opacity: 1;
            animation: rotate 4s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .game-type-card:hover {
            border-color: var(--primary);
            transform: translateY(-10px) scale(1.02);
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.6),
                0 0 40px rgba(0, 240, 255, 0.3),
                inset 0 0 30px rgba(0, 240, 255, 0.05);
        }

        .game-type-icon {
            font-size: 64px;
            margin-bottom: 20px;
            display: block;
            filter: drop-shadow(0 0 15px rgba(0, 240, 255, 0.5));
        }

        .game-type-card h3 {
            font-family: var(--font-display);
            font-size: 24px;
            color: var(--text-bright);
            margin-bottom: 12px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .game-type-card p {
            color: white;
            font-size: 14px;
            line-height: 1.6;
        }

        /* ==========================================
           SESSIONS LIST
           ========================================== */
        .sessions-list {
            display: grid;
            gap: 20px;
        }

        .session-card {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 25px;
            display: grid;
            grid-template-columns: auto 1fr auto;
            gap: 20px;
            align-items: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .session-card::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: var(--accent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .session-card:hover {
            border-color: var(--border-bright);
            box-shadow: 0 5px 20px rgba(0, 240, 255, 0.2);
            transform: translateX(5px);
        }

        .session-card:hover::before {
            opacity: 1;
        }

        .session-card.locked {
            opacity: 0.8;
            background: rgba(132, 53, 222, 0.5);
        }

        .session-card.locked::after {
            content: 'üîí';
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 20px;
        }

        .session-status {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--success);
            box-shadow: 0 0 10px var(--accent-glow);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.2); }
        }

        .session-info h4 {
            font-family: var(--font-display);
            font-size: 18px;
            color: var(--text-bright);
            margin-bottom: 5px;
            font-weight: 700;
        }

        .session-meta {
            display: flex;
            gap: 15px;
            font-size: 13px;
            color: var(--text-dim);
        }

        .session-code {
            font-family: var(--font-display);
            font-size: 24px;
            font-weight: 900;
            color: var(--primary);
            padding: 10px 20px;
            background: rgba(0, 240, 255, 0.1);
            border: 2px solid var(--primary);
            border-radius: 8px;
            letter-spacing: 3px;
            text-shadow: 0 0 10px var(--primary-glow);
        }

        /* ==========================================
           EMPTY STATE
           ========================================== */
        .empty-state {
            text-align: center;
            padding: 60px 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            border: 2px dashed var(--border);
        }

        .empty-state .icon {
            font-size: 80px;
            margin-bottom: 20px;
            opacity: 0.5;
            filter: grayscale(100%);
        }

        .empty-state p {
            color: var(--text-dim);
            font-size: 16px;
        }

        /* ==========================================
           MODALS
           ========================================== */
       .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(5, 8, 22, 0.95);
            backdrop-filter: blur(10px);
            z-index: 9999;
            overflow-y: auto;
            padding: 20px;
            animation: fadeIn 0.3s ease;
            pointer-events: none;
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
            pointer-events: auto;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--bg-card);
            border: 2px solid var(--border-bright);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.8),
                0 0 40px rgba(0, 240, 255, 0.2);
            animation: modalSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes modalSlideIn {
            from { 
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border: 2px solid white;
            background: transparent;
            color: var(--text-bright);
            font-size: 24px;
            cursor: pointer;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: var(--error);
            color: var(--text-bright);
            transform: rotate(90deg);
            box-shadow: 0 0 20px rgba(255, 0, 85, 0.5);
        }

        .modal h2 {
            font-family: var(--font-display);
            font-size: 28px;
            color: var(--text-bright);
            margin-bottom: 25px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* ==========================================
           FORMS
           ========================================== */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: var(--text);
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 14px 18px;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 16px;
            font-family: var(--font-body);
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(0, 0, 0, 0.6);
            box-shadow: 0 0 20px rgba(0, 240, 255, 0.2);
        }

        /* ==========================================
           GAME CODE DISPLAY
           ========================================== */
        .game-code-display {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, rgba(0, 240, 255, 0.1), rgba(255, 0, 255, 0.1));
            border-radius: 16px;
            border: 2px solid var(--border-bright);
            margin: 30px 0;
        }

        .game-code-display h3 {
            font-family: var(--font-display);
            font-size: 18px;
            color: var(--text-dim);
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .game-code {
            font-family: var(--font-display);
            font-size: 56px;
            font-weight: 900;
            color: var(--primary);
            letter-spacing: 8px;
            text-shadow: 
                0 0 20px var(--primary-glow),
                0 0 40px var(--primary-glow),
                0 0 60px var(--primary-glow);
            animation: codeGlow 2s ease-in-out infinite;
            margin: 20px 0;
        }

        @keyframes codeGlow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .code-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        /* ==========================================
           LEADERBOARD
           ========================================== */
        .leaderboard-list {
            display: grid;
            gap: 15px;
        }

        .leaderboard-item {
            display: grid;
            grid-template-columns: 60px 1fr auto;
            gap: 20px;
            align-items: center;
            padding: 20px;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .leaderboard-item:nth-child(1) {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), var(--bg-card));
            border-color: #ffd700;
        }

        .leaderboard-item:nth-child(2) {
            background: linear-gradient(135deg, rgba(192, 192, 192, 0.1), var(--bg-card));
            border-color: #c0c0c0;
        }

        .leaderboard-item:nth-child(3) {
            background: linear-gradient(135deg, rgba(205, 127, 50, 0.1), var(--bg-card));
            border-color: #cd7f32;
        }

        .leaderboard-item:hover {
            transform: translateX(10px);
            box-shadow: 0 5px 20px rgba(0, 240, 255, 0.2);
        }

        .rank {
            font-family: var(--font-display);
            font-size: 32px;
            font-weight: 900;
            color: var(--primary);
            text-align: center;
        }

        .leaderboard-item:nth-child(1) .rank {
            color: #ffd700;
            font-size: 40px;
        }

        .leaderboard-item:nth-child(2) .rank {
            color: #c0c0c0;
        }

        .leaderboard-item:nth-child(3) .rank {
            color: #cd7f32;
        }

        .player-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .player-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            border: 2px solid var(--border-bright);
        }

        .player-name {
            font-family: var(--font-display);
            font-size: 18px;
            font-weight: 700;
            color: var(--text-bright);
        }

        .score {
            font-family: var(--font-display);
            font-size: 24px;
            font-weight: 900;
            color: var(--accent);
            text-shadow: 0 0 10px var(--accent-glow);
        }

        /* ==========================================
           PROFILE PAGE
           ========================================== */
        .profile-header {
            text-align: center;
            padding: 40px;
            background: #8435DE;
            border-radius: 16px;
            border: 2px solid var(--border);
            margin-bottom: 30px;
        }

        .profile-avatar-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary)) center/cover no-repeat;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            margin: 0 auto 20px;
            border: 4px solid var(--border-bright);
            box-shadow: 0 0 30px rgba(0, 240, 255, 0.3);
            background-size: contain;
            background-position: center;
        }

        .profile-name {
            font-family: var(--font-display);
            font-size: 32px;
            font-weight: 900;
            color: var(--text-bright);
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .profile-role {
            font-size: 16px;
            color: white;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* ==========================================
           CATEGORY COLORS
           ========================================== */
        .color-theme-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .color-option {
            padding: 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 700;
            border: 2px solid transparent;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .color-baby-purple {
            background: rgba(168, 85, 247, 0.2);
            color: var(--baby-purple);
        }

        .color-baby-pink {
            background: rgba(236, 72, 153, 0.2);
            color: var(--baby-pink);
        }

        .color-baby-blue {
            background: rgba(59, 130, 246, 0.2);
            color: var(--baby-blue);
        }

        .color-option:hover,
        .color-option.selected {
            border-color: currentColor;
            box-shadow: 0 0 20px currentColor;
            transform: scale(1.05);
        }

        /* ==========================================
           FLASHCARDS
           ========================================== */
        .flashcards-container {
            display: grid;
            gap: 12px;
            max-height: 400px;
            overflow-y: auto;
        }

        .flashcard-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .flashcard-item:hover {
            background: rgba(0, 0, 0, 0.5);
            border-color: var(--primary);
            transform: translateX(5px);
        }

        .flashcard-text {
            color: var(--text);
            font-size: 16px;
        }

        .flashcard-delete {
            background: rgba(255, 0, 85, 0.2);
            border: 1px solid var(--error);
            color: var(--error);
            width: 32px;
            height: 32px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .flashcard-delete:hover {
            background: var(--error);
            color: var(--text-bright);
            transform: rotate(90deg);
        }

        /* ==========================================
           UTILITY CLASSES
           ========================================== */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        /* ==========================================
           RESPONSIVE - DESKTOP
           ========================================== */
        @media (min-width: 769px) {
            .sidebar {
                display: flex;
            }

            .mobile-nav {
                display: none;
            }

            .game-container {
                grid-template-columns: 1fr;
            }

            .dashboard-content {
                padding: 40px 50px;
                padding-bottom: 40px;
                margin-left: 280px;
                position: relative;
                z-index: 10;
            }

            .game-card {
                padding: 40px;
            }

            .stats-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* ==========================================
           RESPONSIVE - TABLET
           ========================================== */
        @media (max-width: 768px) {
            .game-card-header h2 {
                font-size: 24px;
            }

            .game-code {
                font-size: 36px;
                letter-spacing: 4px;
            }

            .code-actions {
                flex-direction: column;
            }

            .code-actions .btn {
                width: 100%;
            }

            .session-card {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 15px;
            }

            .session-code {
                font-size: 20px;
            }

            .game-selection {
                grid-template-columns: 1fr;
            }
        }

        /* ==========================================
           SCROLLBAR STYLING
           ========================================== */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-darker);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        /* ==========================================
           LOADING ANIMATION
           ========================================== */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--border);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- ==========================================
             DESKTOP SIDEBAR NAVIGATION
             ========================================== -->
        <aside class="sidebar">
            <div class="logo">Qitz!</div>
            
        <nav class="sidebar-nav">
            <button class="nav-item active" data-tab="overview"
                style="display:flex; align-items:center; gap:10px;">
                <img src="assets/home icon.png"
                    alt="Overview"
                    style="width:40px; height:40px; object-fit:cover; display:block;">
                
                <span>Overview</span>
            </button>
        </nav>


                
                <button class="nav-item" data-tab="sessions">
                <img src="assets/Untitled_design__23_-removebg-preview.png"
                    alt="Overview"
                    style="width:50px; height:50px; object-fit:contain; display:block;">
                
                    <span>Sessions</span>
                </button>
                
                <button class="nav-item" data-tab="leaderboard">
                <img src="assets/leaderboard.png"
                    alt="Overview"
                    style="width:50px; height:50px; object-fit:cover; display:block;">
                
                    <span>Leaderboard</span>
                </button>
                
                <button class="nav-item" data-tab="profile">
                <img src="assets/profile.png"
                    alt="Overview"
                    style="width:50px; height:50px; object-fit:cover; display:block;">
                    <span>Profile</span>
                </button>
                
                <button class="nav-item hidden" data-tab="quiz-sessions">
                    <span class="icon">‚ùì</span>
                    <span>Quiz Manager</span>
                </button>
                
                <button class="nav-item hidden" data-tab="charades-sessions">
                    <span class="icon">üé≠</span>
                    <span>Act It Out</span>
                </button>
                
                <div class="nav-spacer"></div>
                
                <button class="btn-logout" onclick="logout()">
                  Logout
                </button>
            </nav>
        </aside>

        <!-- ==========================================
             MAIN CONTENT
             ========================================== -->
        <main class="dashboard-content">
            <!-- ==========================================
                 OVERVIEW TAB
                 ========================================== -->
            <div id="overview" class="tab-content active">

                <!-- Game Selection -->
                <div class="game-card">
      <div style="text-align: right;">
                        <button
                            onclick="openGuideModal()"
                            style="
                                width: 48px;
                                height: 48px;
                                border-radius: 50%;
                                border: 2px solid white;
                                cursor: pointer;
                                background: transparent;
                                color: white;
                                font-size: 22px;
                                display: inline-flex;
                                align-items: center;
                                justify-content: center;
                                box-shadow: 0 6px 16px rgba(0,0,0,0.35);
                            "
                            aria-label="Help"
                        >
                            ‚ùî
                        </button>
                    </div>
                    <div class="game-card-header">
                        <h2>Choose your arena</h2>
                        <p> Select Game Mode</p>
                    </div>

                    <div class="game-selection">
                        <div class="game-type-card" onclick="selectGame('quiz')">
                            <span class="game-type-icon">‚ùì</span>
                            <h3>Quiz Arena</h3>
                            <p>Test knowledge with multiple-choice questions. Perfect for trivia battles and educational challenges.</p>
                        </div>

                        <div class="game-type-card" onclick="selectGame('charades')">
                            <span class="game-type-icon">üé≠</span>
                            <h3>Act it Out</h3>
                            <p>Act it out! Create custom categories with flashcards for endless party fun.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==========================================
                 SESSIONS TAB
                 ========================================== -->
            <div id="sessions" class="tab-content">
                <div class="game-card">
                    <div class="game-card-header">
                        <h2> Active Sessions</h2>
                        <p>Live game monitoring</p>
                    </div>

                    <div class="game-card-content">
                        <div class="sessions-list">
                            <div class="empty-state">
                                <div class="icon">üéÆ</div>
                                <p>No active sessions</p>
                                <p style="margin-top: 10px;">Create a game from the Overview to get started!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==========================================
                 LEADERBOARD TAB
                 ========================================== -->
            <div id="leaderboard" class="tab-content">
                <div class="game-card">
                    <div class="game-card-header">
                        <h2> Leaderboard</h2>
                        <p>Top Players</p>
                    </div>

                    <div class="game-card-content">
                        <div class="leaderboard-list">
                            <div class="leaderboard-item">
                                <div class="rank">1</div>
                                <div class="player-info">
                                    <div class="player-avatar">üéÆ</div>
                                    <div class="player-name">Player One</div>
                                </div>
                                <div class="score">1250</div>
                            </div>
                            <div class="leaderboard-item">
                                <div class="rank">2</div>
                                <div class="player-info">
                                    <div class="player-avatar">‚ö°</div>
                                    <div class="player-name">Speed Runner</div>
                                </div>
                                <div class="score">1100</div>
                            </div>
                            <div class="leaderboard-item">
                                <div class="rank">3</div>
                                <div class="player-info">
                                    <div class="player-avatar">üî•</div>
                                    <div class="player-name">Fire Starter</div>
                                </div>
                                <div class="score">980</div>
                            </div>
                            <div class="leaderboard-item">
                                <div class="rank">4</div>
                                <div class="player-info">
                                    <div class="player-avatar">üíé</div>
                                    <div class="player-name">Diamond Ace</div>
                                </div>
                                <div class="score">875</div>
                            </div>
                            <div class="leaderboard-item">
                                <div class="rank">5</div>
                                <div class="player-info">
                                    <div class="player-avatar">üåü</div>
                                    <div class="player-name">Star Player</div>
                                </div>
                                <div class="score">820</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==========================================
                 PROFILE TAB
                 ========================================== -->
            <div id="profile" class="tab-content">
                <div class="profile-header">
                    <div class="profile-avatar-large">üë®‚Äçüíº</div>
                    <div class="profile-name">Admin Player</div>
                    <div class="profile-role">Game Master</div>
                </div>

                <div class="game-card">
                    <div class="game-card-header">
                        <p>Customize your profile</p>
                    </div>

                    <div class="game-card-content">
                        <div class="form-group">
                            <label>Display Name</label>
                            <input type="text" placeholder="Enter your name" value="Admin Player">
                        </div>

                        <div style="margin-top: 30px;">
                            <button class="btn-primary btn-large">üíæ Save Changes</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==========================================
                 QUIZ SESSIONS (SESSIONS LIST) - NEW STRUCTURE
                 ========================================== -->
            <div id="quiz-sessions" class="tab-content">
                <div class="game-card">
                    <!-- Back navigation -->
                     
                    <div class="game-card-header">
                        <h2> Quiz Arena</h2>
                        <p>Create and manage quiz sessions</p>
                    </div>

                    <div class="game-card-header">
                    <div style="display:flex; justify-content:flex-end; align-items:center;">
                        <button class="btn-primary" style="height: 40px; width: 200px;" onclick="createNewQuizSession()">
                            ‚ûï Create New Session
                        </button>
                    </div>
                </div>


                    <div class="game-card-content">
                        <!-- Previous Sessions List -->
                        <div id="quizSessionsList" class="sessions-grid">
                            <!-- Sessions will be loaded here dynamically -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==========================================
                 QUIZ SESSION EDITOR (HIDDEN UNTIL EDIT)
                 ========================================== -->
            <div id="quiz-editor" class="tab-content">
                <div class="game-card">
                    <div style="margin-bottom: 25px; text-align: left;">
                        <button class="btn-primary" style="height: 40px; width: 200px;" onclick="backToQuizSessions()">
                            ‚Üê Back to Sessions
                        </button>
                    </div>

                    <div class="game-card-header">
                        <h2 id="quizEditorTitle">Create Quiz Session</h2>
                        <p>Add questions and customize your quiz</p>
                    </div>

                    <div class="game-card-content">
                        <!-- Session Name -->
                        <div class="form-group">
                            <label for="quizSessionName">Session Name</label>
                            <input type="text" id="quizSessionName" placeholder="e.g., Friday Night Quiz" required>
                        </div>

                        <!-- Questions Section -->
                        <div style="margin-top: 30px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h3>Quiz Questions</h3>
                                <button class="btn-primary" style="height: 40px; width: 200px;" onclick="showAddQuizQuestion()">‚ûï Add Question</button>
                            </div>

                            <!-- Add Question Form -->
                            <div id="addQuizQuestionForm" class="hidden" style="background: var(--bg); padding: 25px; border-radius: 15px; margin-bottom: 20px;">
                                <h4 style="margin-bottom: 15px;">New Question</h4>
                                <div class="form-group">
                                    <label for="quizQuestionText">Question Text</label>
                                    <input type="text" id="quizQuestionText" placeholder="What's your question?" required>
                                </div>
                                <div class="form-group">
                                    <label for="quizOption1">Option 1</label>
                                    <input type="text" id="quizOption1" placeholder="First option" required>
                                </div>
                                <div class="form-group">
                                    <label for="quizOption2">Option 2</label>
                                    <input type="text" id="quizOption2" placeholder="Second option" required>
                                </div>
                                <div class="form-group">
                                    <label for="quizOption3">Option 3</label>
                                    <input type="text" id="quizOption3" placeholder="Third option" required>
                                </div>
                                <div class="form-group">
                                    <label for="quizOption4">Option 4</label>
                                    <input type="text" id="quizOption4" placeholder="Fourth option" required>
                                </div>
                                <div class="form-group">
                                    <label for="quizCorrectAnswer">Correct Answer</label>
                                    <select id="quizCorrectAnswer" required>
                                        <option value="1">Option 1</option>
                                        <option value="2">Option 2</option>
                                        <option value="3">Option 3</option>
                                        <option value="4">Option 4</option>
                                    </select>
                                </div>
                                <div style="display: flex; gap: 10px;">
                                    <button class="btn-primary" onclick="saveQuizQuestion()">Save Question</button>
                                    <button class="btn-secondary" onclick="cancelAddQuizQuestion()">Cancel</button>
                                </div>
                            </div>

                            <!-- Questions List -->
                            <div id="quizQuestionsList" class="questions-list">
                                <div class="empty-state">
                                    <div class="icon">üìù</div>
                                    <h3>No questions yet</h3>
                                    <p>Add your first question to get started</p>
                                </div>
                            </div>
                        </div>

                        <!-- Save Session Button -->
                        <div style="margin-top: 30px; text-align: center;">
                            <button class="btn-primary btn-large" onclick="saveQuizSession()">
                                üíæ Save Session & Generate Code
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==========================================
                 CHARADES SESSIONS TAB
                 ========================================== -->
            <div id="charades-sessions" class="tab-content">
                <div class="game-card">
                    <div class="game-card-header">
                        <h2> ACT IT OUT</h2>
                        <p>Create custom categories and flashcards</p>
                    </div>

                    <div class="game-card-content">
                        <div class="form-group">
                            <label>Game Name</label>
                            <input type="text" id="charadesGameName" placeholder="e.g., Movie Night Charades">
                        </div>

                        <div class="form-group">
                            <label>Time per Round (seconds)</label>
                            <input type="number" id="roundTime" placeholder="60" min="30" max="180">
                        </div>

                        <div style="margin-top: 30px; margin-bottom: 25px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h3 style="font-family: var(--font-display); color: var(--text-bright); text-transform: uppercase;">Categories</h3>
                                <button class="btn-primary" style="height: 40px; width: 200px;"  onclick="openCategoryModal()">‚ûï Add Custom Category</button>
                            </div>

                            <div style="display:flex; gap:20px; align-items:flex-start;">
                                <div style="flex:1">
                                    <div id="categoriesList" class="sessions-list">
                                        <p>Loading categories...</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 30px; text-align: center;">
                            <button class="btn-primary btn-large" onclick="saveCharadesGame()">
                                üíæ Save Game & Generate Code
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- ==========================================
             MOBILE BOTTOM NAVIGATION     
             ========================================== -->
            <nav class="mobile-nav">

            <button class="mobile-nav-item active" data-tab="overview"
                style="display:flex; flex-direction:column; align-items:center; gap:4px;">
                
                <span class="icon mobile-nav-icon">
                <img src="assets/home icon.png"
                    alt="Home"
                    class="mobile-nav-icon"
                    style="width:50px; height:50px; object-fit:contain; display:block;">
                    </span>
            </button>

            <button class="mobile-nav-item" data-tab="sessions"
                style="display:flex; flex-direction:column; align-items:center; gap:4px;">
                <span class="icon mobile-nav-icon">
               <img src="assets/Untitled_design__23_-removebg-preview.png"
                    alt="sessions"
                    class="mobile-nav-icon"
                    style="width:60px; height:60px; object-fit:contain; display:block;">
                    </span>
            </button>

            <button class="mobile-nav-item" data-tab="leaderboard"
                style="display:flex; flex-direction:column; align-items:center; gap:4px;">
                <span class="icon mobile-nav-icon">
               <img src="assets/leaderboard.png"
                    alt="leaderboard"
                    class="mobile-nav-icon"
                    style="width:100px; height:80px; object-fit:contain; display:block;">
                    </span>
            </button>
            <button class="mobile-nav-item" data-tab="profile"
                style="display:flex; flex-direction:column; align-items:center; gap:4px;">
                
                <span class="icon mobile-nav-icon">
                <img src="assets/profile.png"
                    alt="leaderboard"
                    class="mobile-nav-icon"
                    style="width:60px; height:60px; object-fit:contain; display:block;">  
                </span>
            </button>

        </nav>


    <!-- ==========================================
         GUIDE MODAL
         ========================================== -->
    <div id="guideModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeGuideModal()">√ó</button>
            <h2>üìñ Game Master Guide</h2>
            
            <div style="color: var(--text); line-height: 1.8;">
                <h3 style="color: var(--primary); margin: 20px 0 10px; font-family: var(--font-display);">Getting Started</h3>
                <p>Welcome to the Command Center! Here's how to create and manage game sessions:</p>
                
                <h3 style="color: var(--primary); margin: 20px 0 10px; font-family: var(--font-display);">Quiz Mode</h3>
                <p><strong>1.</strong> Select "Quiz Arena" from the Overview<br>
                <strong>2.</strong> Set your quiz parameters (title, questions, time)<br>
                <strong>3.</strong> Generate a game code<br>
                <strong>4.</strong> Share the code with players</p>
                
                <h3 style="color: var(--primary); margin: 20px 0 10px; font-family: var(--font-display);">Charades Mode</h3>
                <p><strong>1.</strong> Select "Charades Zone" from Overview<br>
                <strong>2.</strong> View default categories (locked, cannot be edited)<br>
                <strong>3.</strong> Create custom categories with flashcards<br>
                <strong>4.</strong> Save and share your game code</p>
                
                <h3 style="color: var(--primary); margin: 20px 0 10px; font-family: var(--font-display);">Managing Sessions</h3>
                <p>Monitor active games in the Sessions tab. View player connections, game codes, and session status in real-time.</p>
            </div>

            <div style="margin-top: 30px; text-align: center;">
                <button class="btn-primary" style="height: 40px; width: 90px;" onclick="closeGuideModal()">Got It!</button>
            </div>
        </div>
    </div>

    <!-- ==========================================
         CATEGORY EDITOR MODAL
         ========================================== -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeCategoryModal()">√ó</button>
            <h2 id="categoryModalTitle">üé® Add Custom Category</h2>
            
            <div class="form-group">
                <label>Category Name</label>
                <input type="text" id="categoryName" placeholder="e.g., Movies, Animals">
            </div>

            <div style="margin-top: 30px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3 style="font-family: var(--font-display); color: var(--text-bright);">
                        Flashcards (<span id="flashcardCount">0</span>/20)
                    </h3>
                    <button class="btn-primary" style="height: 40px; width: 100px;"  onclick="showAddFlashcard()">‚ûï Add</button>
                </div>

                <div id="addFlashcardForm" class="hidden" style="background: rgba(0, 0, 0, 0.3); padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 1px solid var(--border);">
                    <div class="form-group" style="margin-bottom: 15px;">
                        <input type="text" id="flashcardText" placeholder="Enter word or phrase">
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn-primary" style="height: 40px; width: 100px;"  onclick="saveFlashcard()"> Save</button>
                        <button class="btn-primary" style="height: 40px; width: 150px;" onclick="cancelAddFlashcard()">‚úñ Cancel</button>
                    </div>
                </div>

                <div id="flashcardsList" class="flashcards-container">
                    <div class="empty-state" style="padding: 40px;">
                        <div class="icon">üé¥</div>
                        <p>No flashcards yet. Add your first one!</p>
                    </div>
                </div>
            </div>

            <div style="margin-top: 30px; display: flex; gap: 12px; justify-content: flex-end;">
                <button class="btn-primary" style="height: 40px; width: 150px;"  onclick="closeCategoryModal()">Cancel</button>
                <button class="btn-primary" style="height: 40px; width: 150px;"  onclick="saveCategoryChanges()"> Save Category</button>
            </div>
        </div>
    </div>

    <!-- ==========================================
         GAME CODE MODAL
         ========================================== -->
    <div id="gameCodeModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeGameCodeModal()">√ó</button>
            <h2>üéâ Game Ready!</h2>
            
            <div class="game-code-display">
                <h3>Your Game Code</h3>
                <div class="game-code" id="displayGameCode">ABC123</div>
                <div class="code-actions">
                    <button class="btn-primary" onclick="copyGameCode()">üìã Copy</button>
                    <button class="btn-primary" onclick="shareGameCode()">üì§ Share</button>
                    <button class="btn-start" onclick="joinOwnGame()">üéÆ Join Game</button>
                </div>
            </div>

            <div style="margin-top: 25px; padding: 25px; background: rgba(0, 0, 0, 0.3); border-radius: 12px; border: 1px solid var(--border);">
                <h4 style="margin-bottom: 12px; color: var(--text-bright); font-family: var(--font-display);">
                    üì± Share with Players
                </h4>
                <p style="color: var(--text-dim); font-size: 14px; line-height: 1.6;">
                    Players can join by entering this code at the join page. The code automatically routes them to the correct game type.
                </p>
            </div>

            <div style="margin-top: 25px; text-align: center;">
                <button class="btn-secondary" onclick="closeGameCodeModal()">Done</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase.js"></script>
    <script src="admin.js"></script>
    <script>
        // ==========================================
        // NAVIGATION & TAB MANAGEMENT
        // ==========================================
        
        // Tab Switching Function
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            const targetTab = document.getElementById(tabName);
            if (targetTab) {
                targetTab.classList.add('active');
            }
            
            // Update desktop nav items
            document.querySelectorAll('.sidebar .nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.tab === tabName) {
                    item.classList.add('active');
                }
            });
            
            // Update mobile nav items
            document.querySelectorAll('.mobile-nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.tab === tabName) {
                    item.classList.add('active');
                }
            });
            
            // Load tab-specific data
            loadTabData(tabName);
        }

        // Setup navigation listeners
        document.addEventListener('DOMContentLoaded', () => {
            // Desktop sidebar navigation
            document.querySelectorAll('.sidebar .nav-item').forEach(item => {
                item.addEventListener('click', () => {
                    const tab = item.dataset.tab;
                    if (tab && !item.classList.contains('hidden')) {
                        switchTab(tab);
                    }
                });
            });

            // Mobile bottom navigation
            document.querySelectorAll('.mobile-nav-item').forEach(item => {
                item.addEventListener('click', () => {
                    const tab = item.dataset.tab;
                    if (tab) {
                        switchTab(tab);
                    }
                });
            });

            // Initialize stats and load default categories
            updateDashboardStats();
            loadDefaultCategories();
        });

        // ==========================================
        // MODAL FUNCTIONS
        // ==========================================
        
        function openGuideModal() {
            document.getElementById('guideModal').classList.add('active');
        }

        function closeGuideModal() {
            document.getElementById('guideModal').classList.remove('active');
        }

        function openCategoryModal() {
            document.getElementById('categoryModal').classList.add('active');
            resetCategoryForm();
        }

        function closeCategoryModal() {
            document.getElementById('categoryModal').classList.remove('active');
        }

        function closeGameCodeModal() {
            document.getElementById('gameCodeModal').classList.remove('active');
        }

        // Close modals when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('active');
            }
        });

        // ==========================================
        // GAME SELECTION
        // ==========================================
        
        function selectGame(gameType) {
            if (gameType === 'quiz') {
                switchTab('quiz-sessions');
                document.querySelector('[data-tab="quiz-sessions"]').classList.remove('hidden');
                document.querySelector('[data-tab="charades-sessions"]').classList.add('hidden');
            } else if (gameType === 'charades') {
                switchTab('charades-sessions');
                document.querySelector('[data-tab="charades-sessions"]').classList.remove('hidden');
                document.querySelector('[data-tab="quiz-sessions"]').classList.add('hidden');
                loadDefaultCategories();
            }
        }

        function backToOverview() {
            switchTab('overview');
            document.querySelector('[data-tab="quiz-sessions"]').classList.add('hidden');
            document.querySelector('[data-tab="charades-sessions"]').classList.add('hidden');
        }

        // ==========================================
        // PROFILE INITIALIZATION (from sessionStorage)
        // ==========================================
        function initializeProfile() {
            const avatarElement = document.querySelector('.profile-avatar-large');
            const nameElement = document.querySelector('.profile-name');
            
            // Get data from sessionStorage
            const selectedAvatarImage = sessionStorage.getItem('selectedAvatarImage');
            const adminDisplayName = sessionStorage.getItem('adminDisplayName');
            
            // Update avatar image if available
            if (selectedAvatarImage && avatarElement) {
                avatarElement.style.backgroundImage = `url('${selectedAvatarImage}')`;
                // Clear text content to show image only
                avatarElement.textContent = '';
            }
            
            // Update display name if available
            if (adminDisplayName && nameElement) {
                nameElement.textContent = adminDisplayName;
            }
        }
        
        // Run on page load
        document.addEventListener('DOMContentLoaded', initializeProfile);

        // ==========================================
        // QUIZ FUNCTIONS
        // ==========================================
        
        // Back handler to return to sessions list from editor
        function backToQuizSessions() {
            switchTab('quiz-sessions');
            // ensure quiz sessions nav is visible and charades is hidden
            document.querySelector('[data-tab="quiz-sessions"]').classList.remove('hidden');
            document.querySelector('[data-tab="charades-sessions"]').classList.add('hidden');
        }

        function createQuizSession() {
            const title = document.getElementById('quizTitle').value;
            const questionCount = document.getElementById('questionCount').value;
            const timePerQuestion = document.getElementById('timePerQuestion').value;
            const difficulty = document.getElementById('difficulty').value;

            if (!title || !questionCount || !timePerQuestion) {
                alert('Please fill in all fields');
                return;
            }

            // Generate random game code
            const gameCode = generateGameCode();
            
            // Show game code modal
            document.getElementById('displayGameCode').textContent = gameCode;
            document.getElementById('gameCodeModal').classList.add('active');

            // In production, this would save to database
            console.log('Quiz Session Created:', { title, questionCount, timePerQuestion, difficulty, gameCode });
        }

        // ==========================================
        // CHARADES FUNCTIONS
        // ==========================================
        
        let currentCategories = [];
        let defaultCategories = [];
        let customCategories = [];
        let currentFlashcards = [];
        let editingCategoryIndex = -1;
        let currentGameId = null;

        // Load default categories from Supabase
        async function loadDefaultCategories() {
            const container = document.getElementById('categoriesList');
            container.innerHTML = '<p>Loading categories...</p>';

            try {
                const { data, error } = await window.supabaseClient
                    .from('charades_categories')
                    .select('*')
                    .eq('is_default', true)
                    .order('name');

                if (error) throw error;

                defaultCategories = data || [];
                currentCategories = [...defaultCategories, ...customCategories];
                updateCategoriesList();
            } catch (err) {
                console.error('Error loading default categories:', err);
                container.innerHTML = '<p style="color: var(--error);">Failed to load default categories</p>';
            }
        }

        async function saveCharadesGame() {
            const gameName = document.getElementById('charadesGameName').value.trim();
            const roundTime = document.getElementById('roundTime').value;

            if (!gameName || !roundTime) {
                alert('Please fill in all fields');
                return;
            }

            if (customCategories.length === 0 && defaultCategories.length === 0) {
                alert('Please ensure at least one category is available');
                return;
            }

            try {
                // Insert game
                const gameCode = generateGameCode();
                const { data: gameData, error: gameErr } = await window.supabaseClient
                    .from('charades_games')
                    .insert([{ name: gameName, round_time: roundTime, code: gameCode }])
                    .select('*')
                    .single();

                if (gameErr) throw gameErr;
                currentGameId = gameData.id;

                // Link all default categories to this game
                if (defaultCategories.length > 0) {
                    const defaultLinks = defaultCategories.map(c => ({ 
                        game_id: currentGameId, 
                        category_id: c.id 
                    }));
                    const { error: linkErr } = await window.supabaseClient
                        .from('charades_game_categories')
                        .insert(defaultLinks);
                    if (linkErr) throw linkErr;
                }

                // Insert custom categories and link them
                for (const cat of customCategories) {
                    const { data: newCat, error: catErr } = await window.supabaseClient
                        .from('charades_categories')
                        .insert([{ 
                            name: cat.name, 
                            emoji: cat.emoji || 'üìù', 
                            color: cat.color || null, 
                            is_default: false, 
                            is_locked: false 
                        }])
                        .select('*')
                        .single();
                    if (catErr) throw catErr;

                    // Link custom category
                    const { error: linkErr2 } = await window.supabaseClient
                        .from('charades_game_categories')
                        .insert([{ game_id: currentGameId, category_id: newCat.id }]);
                    if (linkErr2) throw linkErr2;

                    // Insert flashcards
                    for (const fc of (cat.flashcards || [])) {
                        const { error: fcErr } = await window.supabaseClient
                            .from('charades_flashcards')
                            .insert([{ category_id: newCat.id, text: fc }]);
                        if (fcErr) throw fcErr;
                    }
                }

                document.getElementById('displayGameCode').textContent = gameCode;
                document.getElementById('gameCodeModal').classList.add('active');
                alert('Game saved successfully!');
                await loadCharadesGames();
            } catch (err) {
                handleSupabaseError(err);
            }
        }

        function selectCategoryColor(color) {
            document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('selected'));
            event.target.classList.add('selected');
        }

        function showAddFlashcard() {
            if (currentFlashcards.length >= 20) {
                alert('A category may have a maximum of 20 flashcards.');
                return;
            }
            document.getElementById('addFlashcardForm').classList.remove('hidden');
            document.getElementById('flashcardText').focus();
        }

        function cancelAddFlashcard() {
            document.getElementById('addFlashcardForm').classList.add('hidden');
            document.getElementById('flashcardText').value = '';
        }

        function saveFlashcard() {
            const text = document.getElementById('flashcardText').value.trim();
            if (!text) return;
            if (currentFlashcards.length >= 20) {
                alert('Cannot add more than 20 flashcards for a category.');
                return;
            }

            currentFlashcards.push(text);
            updateFlashcardsList();
            cancelAddFlashcard();
        }

        function updateFlashcardsList() {
            const container = document.getElementById('flashcardsList');
            document.getElementById('flashcardCount').textContent = currentFlashcards.length;

            if (currentFlashcards.length === 0) {
                container.innerHTML = `
                    <div class="empty-state" style="padding: 40px;">
                        <div class="icon">üé¥</div>
                        <p>No flashcards yet. Add your first one!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = currentFlashcards.map((card, index) => `
                <div class="flashcard-item">
                    <span class="flashcard-text">${card}</span>
                    <button class="flashcard-delete" onclick="deleteFlashcard(${index})">√ó</button>
                </div>
            `).join('');
        }

        function deleteFlashcard(index) {
            currentFlashcards.splice(index, 1);
            updateFlashcardsList();
        }

        async function saveCategoryChanges() {
            const name = document.getElementById('categoryName').value.trim();
            const selectedColor = document.querySelector('.color-option.selected');
            
            if (!name) {
                alert('Please fill in category name');
                return;
            }

            if (currentFlashcards.length === 0) {
                alert('Please add at least one flashcard');
                return;
            }

            const categoryPayload = {
                name,
                emoji: 'üìù',  // Default emoji since we removed emoji picker
                color: selectedColor ? selectedColor.textContent.trim() : null,
                flashcards: [...currentFlashcards],
                is_default: false,
                is_locked: false
            };

            // For new games or editing custom categories
            if (editingCategoryIndex >= 0) {
                customCategories[editingCategoryIndex] = categoryPayload;
            } else {
                customCategories.push(categoryPayload);
            }

            currentCategories = [...defaultCategories, ...customCategories];
            updateCategoriesList();
            closeCategoryModal();
            resetCategoryForm();
        }

        function updateCategoriesList() {
            const container = document.getElementById('categoriesList');
            
            if (currentCategories.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="icon">üé¥</div>
                        <p>No categories available. Add a custom category!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = currentCategories.map((cat, index) => {
                const locked = !!cat.is_locked;
                const isDefault = !!cat.is_default;
                const lockIcon = locked ? 'üîí' : '';
                const badge = isDefault ? '<span style="background: rgba(255,215,0,0.2); color: #ffd700; padding: 4px 8px; border-radius: 4px; font-size: 11px; margin-left: 8px;">DEFAULT</span>' : '';
                
                // Default categories: no action buttons
                // Custom categories: show edit/delete buttons
                let actionButtons = '';
                if (!isDefault) {
                    const customIndex = customCategories.findIndex(c => c.name === cat.name);
                    actionButtons = `
                        <div style="display: flex; gap: 10px;">
                            <button class="btn-secondary" onclick="editCustomCategory(${customIndex})" style="padding: 8px 16px; font-size: 14px;">‚úèÔ∏è Edit</button>
                            <button class="btn-danger" onclick="deleteCustomCategory(${customIndex})" style="padding: 8px 16px; font-size: 14px;">üóëÔ∏è</button>
                        </div>
                    `;
                }

                const flashcardCount = isDefault ? '(Pre-loaded)' : `${(cat.flashcards || []).length} flashcards`;

                return `
                <div class="session-card ${locked ? 'locked' : ''}">
                    <div class="session-status"></div>
                    <div class="session-info">
                        <h4>${lockIcon} ${cat.name}${badge}</h4>
                        <div class="session-meta">
                            <span>${flashcardCount}</span>
                            <span>Color: ${cat.color || '‚Äî'}</span>
                        </div>
                    </div>
                    ${actionButtons}
                </div>`;
            }).join('');
        }

        function editCustomCategory(index) {
            editingCategoryIndex = index;
            const category = customCategories[index];

            document.getElementById('categoryName').value = category.name || '';
            currentFlashcards = [...(category.flashcards || [])];

            // Select color
            document.querySelectorAll('.color-option').forEach(opt => {
                opt.classList.remove('selected');
                if (opt.textContent.trim() === category.color) {
                    opt.classList.add('selected');
                }
            });

            updateFlashcardsList();
            openCategoryModal();
        }

        function deleteCustomCategory(index) {
            if (!confirm('Delete this custom category?')) return;
            customCategories.splice(index, 1);
            currentCategories = [...defaultCategories, ...customCategories];
            updateCategoriesList();
        }

        function resetCategoryForm() {
            editingCategoryIndex = -1;
            document.getElementById('categoryName').value = '';
            currentFlashcards = [];
            updateFlashcardsList();
            
            // Reset color selection
            document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('selected'));
            document.querySelector('.color-baby-pink').classList.add('selected');
        }

        // ==========================================
        // CHARADES GAMES MANAGEMENT
        // ==========================================

        async function loadCharadesGames() {
            const container = document.getElementById('charadesGamesList');
            container.innerHTML = '<p style="color:var(--text-dim);">Loading games...</p>';
            
            try {
                const { data, error } = await window.supabaseClient
                    .from('charades_games')
                    .select('*')
                    .order('created_at', { ascending: false });
                    
                if (error) throw error;

                if (!data || data.length === 0) {
                    container.innerHTML = '<p style="color:var(--text-dim);">No saved games yet</p>';
                    return;
                }

                container.innerHTML = data.map(g => `
                    <div style="display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:8px;">
                        <div>
                            <strong>${g.name}</strong>
                            <div style="font-size:12px; color:var(--text-dim)">Code: ${g.code}</div>
                        </div>
                        <div style="display:flex; gap:6px;">
                            <button class="btn-secondary" onclick="openCharadesGame('${g.id}')">Open</button>
                        </div>
                    </div>
                `).join('');
            } catch (err) {
                handleSupabaseError(err);
            }
        }

        function refreshCharadesGames() {
            loadCharadesGames();
        }

        async function openCharadesGame(gameId) {
            try {
                const { data: game, error: gErr } = await window.supabaseClient
                    .from('charades_games')
                    .select('*')
                    .eq('id', gameId)
                    .single();
                    
                if (gErr) throw gErr;
                
                currentGameId = game.id;
                document.getElementById('charadesGameName').value = game.name || '';
                document.getElementById('roundTime').value = game.round_time || '';

                // Load all linked categories
                const { data: links, error: lErr } = await window.supabaseClient
                    .from('charades_game_categories')
                    .select('category_id, charades_categories(*)')
                    .eq('game_id', gameId);
                    
                if (lErr) throw lErr;

                defaultCategories = [];
                customCategories = [];

                for (const link of links) {
                    const c = link.charades_categories;
                    const categoryObj = { 
                        id: c.id, 
                        name: c.name, 
                        emoji: c.emoji, 
                        color: c.color, 
                        is_default: c.is_default, 
                        is_locked: c.is_locked, 
                        flashcards: [] 
                    };

                    // Fetch flashcards only for custom categories
                    if (!c.is_default) {
                        const { data: fcs, error: fErr } = await window.supabaseClient
                            .from('charades_flashcards')
                            .select('*')
                            .eq('category_id', c.id)
                            .order('id');
                            
                        if (fErr) {
                            handleSupabaseError(fErr);
                        } else {
                            categoryObj.flashcards = (fcs || []).map(f => f.text);
                        }
                    }

                    if (c.is_default) {
                        defaultCategories.push(categoryObj);
                    } else {
                        customCategories.push(categoryObj);
                    }
                }

                currentCategories = [...defaultCategories, ...customCategories];
                updateCategoriesList();
                switchTab('charades-sessions');
            } catch (err) {
                handleSupabaseError(err);
            }
        }

        function handleSupabaseError(err) {
            console.error('Supabase error', err);
            if (err && err.code === '23514') {
                alert('A database constraint blocked the action (limit exceeded or invalid data).');
            } else if (err && err.details && /locked/.test(err.details)) {
                alert('This operation is not permitted on a locked category.');
            } else {
                alert('An error occurred. See console for details.');
            }
        }

        // ==========================================
        // UTILITY FUNCTIONS
        // ==========================================
        
        function generateGameCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let code = '';
            for (let i = 0; i < 6; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        function copyGameCode() {
            const code = document.getElementById('displayGameCode').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('Code copied to clipboard!');
            });
        }

        function shareGameCode() {
            const code = document.getElementById('displayGameCode').textContent;
            if (navigator.share) {
                navigator.share({
                    title: 'Join my game!',
                    text: `Join my game with code: ${code}`,
                }).catch(() => {
                    copyGameCode();
                });
            } else {
                copyGameCode();
            }
        }

        function joinOwnGame() {
            const code = document.getElementById('displayGameCode').textContent;
            alert(`Joining game with code: ${code}`);
            // In production, this would navigate to the game page
        }

        function updateDashboardStats() {
            // In production, these would fetch from database
            document.getElementById('totalGames').textContent = '12';
            document.getElementById('totalPlayers').textContent = '48';
            document.getElementById('activeSessions').textContent = '3';
            document.getElementById('topScore').textContent = '1250';
        }

        // Initialize on load
        window.addEventListener('load', () => {
            if (window.supabaseClient) {
                loadCharadesGames();
            }
        });

        function loadTabData(tabName) {
            // In production, this would fetch relevant data for each tab
            console.log('Loading data for tab:', tabName);
        }

        function logout() {
    if (confirm('Are you sure you want to logout?')) {
        // Clear session storage
        sessionStorage.removeItem('adminRole');
        sessionStorage.removeItem('adminId');
        sessionStorage.removeItem('adminEmail');
        sessionStorage.removeItem('isBypassMode');
        sessionStorage.removeItem('adminCode');
        sessionStorage.removeItem('clientId');
        
        // Redirect to login page
        window.location.href = 'admin-login.html';
    }
}
    </script>
</body>
</html>